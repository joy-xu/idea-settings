<application>
  <component name="VimEditorSettings">
    <editor>
      <key-repeat enabled="true" />
    </editor>
  </component>
  <component name="VimHistorySettings">
    <history>
      <history-search>
        <entry encoding="base64">XDwxXD4=</entry>
        <entry encoding="base64">XDwzMVw+</entry>
        <entry>throw</entry>
        <entry>accountUserId</entry>
        <entry>Face</entry>
        <entry>workGroupLeader</entry>
        <entry>batch</entry>
        <entry>user_id</entry>
        <entry>userId</entry>
        <entry>register</entry>
        <entry>workplaceManager</entry>
        <entry>workPlaceManager</entry>
        <entry>calc</entry>
        <entry>bigtable</entry>
        <entry>TODO</entry>
        <entry>status</entry>
        <entry>operateMonth</entry>
        <entry>zadd</entry>
        <entry>Pair</entry>
        <entry encoding="base64">XDxuYW1lXD4=</entry>
      </history-search>
      <history-cmd>
        <entry>1290</entry>
        <entry>%/s/long/Long/g</entry>
        <entry>%s/long/Long/g</entry>
        <entry>%s/int/Integer/g</entry>
        <entry>%s/Date/LocalDateTime/g</entry>
        <entry>%s/user/employee/g</entry>
        <entry>%s/,/;/g</entry>
        <entry>%s/localDateTime/startTime/g</entry>
        <entry>330</entry>
        <entry>192</entry>
        <entry>2634</entry>
        <entry>1480</entry>
        <entry>%A,</entry>
        <entry>%normal A,</entry>
        <entry>%normal A;</entry>
        <entry>%snormal A,</entry>
        <entry>%s normal A,</entry>
        <entry>%s normal I&quot;</entry>
        <entry>q!</entry>
        <entry>wq</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
  </component>
  <component name="VimKeySettings">
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed 2</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>shift ctrl pressed 2</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed Y</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed C</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed M</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed L</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed J</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed K</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
  <component name="VimMarksSettings">
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/LzdPprHandler.java" timestamp="1602474497125">
        <mark key="'" line="1367" column="47" />
        <mark key="[" line="1357" column="77" />
        <mark key="]" line="1357" column="84" />
        <mark key="." line="1357" column="83" />
        <mark key="^" line="1357" column="84" />
      </file>
      <file name="$APPLICATION_CONFIG_DIR$/scratches/scratch_20.java" timestamp="1602515248286">
        <mark key="[" line="14" column="20" />
        <mark key="]" line="14" column="23" />
        <mark key="." line="14" column="22" />
        <mark key="^" line="14" column="23" />
      </file>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/provider/adb/efficiency/LabourPprProvider.java" timestamp="1602321140637">
        <mark key="'" line="277" column="95" />
        <mark key="[" line="316" column="82" />
        <mark key="]" line="317" column="19" />
        <mark key="^" line="317" column="19" />
        <mark key="." line="317" column="18" />
      </file>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/common/enums/LmsEnum.java" timestamp="1602470697739">
        <mark key="[" line="1316" column="32" />
        <mark key="]" line="1316" column="33" />
        <mark key="^" line="1316" column="33" />
        <mark key="." line="1316" column="32" />
      </file>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-manager/src/main/java/com/cainiao/lms/manager/impl/OperationConfigManagerImpl.java" timestamp="1602470050035">
        <mark key="[" line="108" column="79" />
        <mark key="]" line="108" column="98" />
        <mark key="." line="108" column="97" />
        <mark key="^" line="108" column="98" />
      </file>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/hsf/impl/EfficiencyServiceImpl.java" timestamp="1602323624884">
        <mark key="'" line="539" column="16" />
        <mark key="[" line="470" column="23" />
        <mark key="l" line="251" column="37" />
        <mark key="]" line="470" column="25" />
        <mark key="." line="470" column="24" />
        <mark key="^" line="470" column="25" />
      </file>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-manager/src/main/java/com/cainiao/lms/manager/OperationConfigManager.java" timestamp="1602468618335">
        <mark key="[" line="48" column="6" />
        <mark key="]" line="49" column="36" />
        <mark key="^" line="49" column="36" />
        <mark key="." line="49" column="35" />
      </file>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/dataobject/OperationConfigDO.java" timestamp="1602469061947">
        <mark key="[" line="25" column="0" />
        <mark key="]" line="25" column="0" />
        <mark key="^" line="26" column="10" />
        <mark key="." line="25" column="0" />
      </file>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" timestamp="1602474549612">
        <mark key="'" line="1116" column="16" />
        <mark key="[" line="1136" column="85" />
        <mark key="]" line="1136" column="92" />
        <mark key="." line="1136" column="91" />
        <mark key="^" line="1136" column="92" />
      </file>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-common/src/main/java/com/cainiao/lms/middleware/diamond/SwitchProperty.java" timestamp="1602324107424">
        <mark key="[" line="668" column="63" />
        <mark key="]" line="670" column="60" />
        <mark key="^" line="670" column="60" />
        <mark key="." line="670" column="59" />
      </file>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/HBaseService.java" timestamp="1602322623928">
        <mark key="[" line="5" column="0" />
        <mark key="]" line="5" column="0" />
        <mark key="^" line="48" column="55" />
        <mark key="." line="5" column="0" />
      </file>
      <file name="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/context/EmployeePprContextParam.java" timestamp="1602474306867">
        <mark key="[" line="27" column="8" />
        <mark key="]" line="27" column="14" />
        <mark key="." line="27" column="13" />
        <mark key="^" line="27" column="14" />
      </file>
    </filemarks>
    <jumps>
      <jump line="19" column="13" filename="$USER_HOME$/cainiao/wmplms/wmplms-common/src/main/java/com/cainiao/lms/config/SequenceConfig.java" />
      <jump line="508" column="5" filename="$USER_HOME$/cainiao/wmplms/wmplms-common/src/main/java/com/cainiao/lms/middleware/diamond/SwitchProperty.java" />
      <jump line="501" column="56" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/impl/YidaProcessServiceImpl.java" />
      <jump line="375" column="13" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/salary/impl/AttendanceRegisterRecordFacadeImpl.java" />
      <jump line="68" column="58" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/test/java/com/cainiao/lms/web/facade/impl/RegisteredAttendanceFacadeImplTest.java" />
      <jump line="15" column="18" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/test/java/com/cainiao/lms/web/facade/salary/impl/AttendanceRegisterRecordFacadeImplTest.java" />
      <jump line="65" column="60" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/test/java/com/cainiao/lms/web/facade/salary/impl/AttendanceRegisterRecordFacadeImplTest.java" />
      <jump line="1568" column="58" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/indirectlabour/impl/IndirectLabourFacadeImpl.java" />
      <jump line="58" column="12" filename="$USER_HOME$/cainiao/wmplms/wmplms-manager/src/main/java/com/cainiao/lms/manager/efficiency/impl/LabourPprModuleManagerImpl.java" />
      <jump line="15" column="13" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/bo/efficiency/LmsLabourEfficiencyPprBO.java" />
      <jump line="70" column="4" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/bo/efficiency/LmsLabourEfficiencyPprBO.java" />
      <jump line="128" column="19" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/bo/efficiency/LmsLabourEfficiencyPprBO.java" />
      <jump line="154" column="35" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/mapper/DingTalkAttendanceStatisticsMapper.java" />
      <jump line="203" column="81" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/mapper/DingTalkAttendanceStatisticsMapper.java" />
      <jump line="204" column="9" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/mapper/DingTalkAttendanceStatisticsMapper.java" />
      <jump line="42" column="11" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/mapper/DingTalkAttendanceStatisticsMapper.java" />
      <jump line="58" column="32" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/provider/DingTalkAttendanceStatisticsProvider.java" />
      <jump line="258" column="46" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="211" column="27" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/api/salary/SalaryResource.java" />
      <jump line="714" column="41" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/impl/EmployeeStatusFacadeImpl.java" />
      <jump line="106" column="26" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/vo/efficiency/EmployeeStatusVO.java" />
      <jump line="322" column="78" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/impl/EmployeeStatusFacadeImpl.java" />
      <jump line="72" column="5" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/config/DatasourceConfig.java" />
      <jump line="461" column="36" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/salary/impl/SalaryItemResultFacadeImpl.java" />
      <jump line="350" column="30" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/salary/impl/SalaryItemResultFacadeImpl.java" />
      <jump line="466" column="36" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/salary/impl/SalaryItemResultFacadeImpl.java" />
      <jump line="55" column="46" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/shardingmapper/salary/SalaryItemResultMapper.java" />
      <jump line="54" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/dataobject/salary/SalaryItemResultDO.java" />
      <jump line="248" column="16" filename="$MAVEN_REPOSITORY$/org/springframework/spring-jdbc/4.3.11.RELEASE/spring-jdbc-4.3.11.RELEASE-sources.jar!/org/springframework/jdbc/datasource/DataSourceTransactionManager.java" />
      <jump line="246" column="45" filename="$MAVEN_REPOSITORY$/org/springframework/spring-jdbc/4.3.11.RELEASE/spring-jdbc-4.3.11.RELEASE-sources.jar!/org/springframework/jdbc/datasource/DataSourceTransactionManager.java" />
      <jump line="71" column="111" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/config/DatasourceConfig.java" />
      <jump line="462" column="36" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/salary/impl/SalaryItemResultFacadeImpl.java" />
      <jump line="489" column="18" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/salary/impl/SalaryItemResultFacadeImpl.java" />
      <jump line="989" column="78" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/indirectlabour/impl/IndirectLabourFacadeImpl.java" />
      <jump line="1030" column="28" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/indirectlabour/impl/IndirectLabourFacadeImpl.java" />
      <jump line="337" column="11" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/indirectlabour/impl/IndirectLabourFacadeImpl.java" />
      <jump line="355" column="15" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/indirectlabour/impl/IndirectLabourFacadeImpl.java" />
      <jump line="489" column="11" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/indirectlabour/impl/IndirectLabourFacadeImpl.java" />
      <jump line="19" column="13" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/dataobject/WorkPlaceDO.java" />
      <jump line="231" column="51" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/salary/impl/SalaryItemResultFacadeImpl.java" />
      <jump line="20" column="19" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/bo/salary/SalaryItemResultModifiedInfoBO.java" />
      <jump line="284" column="57" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/salary/impl/SalaryItemResultFacadeImpl.java" />
      <jump line="233" column="49" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/web/facade/salary/impl/SalaryItemResultFacadeImpl.java" />
      <jump line="203" column="33" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/impl/EhrServiceImpl.java" />
      <jump line="148" column="79" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractPprHandler.java" />
      <jump line="211" column="44" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="335" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/LabourEfficiencyDTO.java" />
      <jump line="27" column="35" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/LabourEfficiencyDTO.java" />
      <jump line="11" column="60" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/LabourEfficiencyDTO.java" />
      <jump line="10" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/LabourEfficiencyDTO.java" />
      <jump line="154" column="28" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/resources/application.properties" />
      <jump line="291" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/resources/application.properties" />
      <jump line="69" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/ScPprPprHandlerWithFiveMinuteEfficiencyDecorator.java" />
      <jump line="45" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/dts/monitor/LmsMonitorProcessor.java" />
      <jump line="53" column="19" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/resources/application-lzd-pre.properties" />
      <jump line="0" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/resources/application-pre2.properties" />
      <jump line="129" column="64" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/hsf/impl/LinkQueryTaskWorkloadServiceImpl.java" />
      <jump line="52" column="13" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/ScPprHandler.java" />
      <jump line="385" column="20" filename="$USER_HOME$/cainiao/wmplms/wmplms-common/src/main/java/com/cainiao/lms/middleware/diamond/SwitchProperty.java" />
      <jump line="151" column="11" filename="$USER_HOME$/cainiao/wmplms/wmplms-web/src/main/java/com/cainiao/lms/controller/MainController.java" />
      <jump line="116" column="4" filename="$USER_HOME$/cainiao/wmplms/wmplms-common/src/main/java/com/cainiao/lms/middleware/diamond/SwitchProperty.java" />
      <jump line="91" column="40" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="530" column="11" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="484" column="11" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="60" column="40" filename="$USER_HOME$/cainiao/wmplms/pom.xml" />
      <jump line="288" column="20" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/LabourEfficiencyDTO.java" />
      <jump line="133" column="9" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/metaq/EmployeePprEventConsumer.java" />
      <jump line="424" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/hsf/impl/EfficiencyServiceImpl.java" />
      <jump line="153" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/hsf/impl/EfficiencyServiceImpl.java" />
      <jump line="105" column="4" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/dataobject/LmsAttendanceStatisticsDO.java" />
      <jump line="19" column="13" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/dataobject/adb/LmsLabourEfficiencyPprDO.java" />
      <jump line="22" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/query/efficiency/EfficiencyPprQuery.java" />
      <jump line="34" column="10" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/query/efficiency/EfficiencyPprQuery.java" />
      <jump line="16" column="13" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/query/efficiency/EfficiencyPprQuery.java" />
      <jump line="30" column="42" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/dataobject/DingTalkAttendanceStatisticsDO.java" />
      <jump line="375" column="53" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/hsf/impl/EfficiencyServiceImpl.java" />
      <jump line="277" column="95" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/provider/adb/efficiency/LabourPprProvider.java" />
      <jump line="91" column="4" filename="$MAVEN_REPOSITORY$/com/cainiao/cloudpath/cloudpath-kvstore-redis/2.1.1/cloudpath-kvstore-redis-2.1.1-sources.jar!/com/cainiao/cloudpath/kvstore/impl/redis/RedisStore.java" />
      <jump line="354" column="36" filename="$MAVEN_REPOSITORY$/com/cainiao/cloudpath/cloudpath-kvstore-redis/2.1.1/cloudpath-kvstore-redis-2.1.1-sources.jar!/com/cainiao/cloudpath/kvstore/impl/redis/RedisStore.java" />
      <jump line="419" column="25" filename="$MAVEN_REPOSITORY$/com/cainiao/cloudpath/cloudpath-kvstore-redis/2.1.1/cloudpath-kvstore-redis-2.1.1-sources.jar!/com/cainiao/cloudpath/kvstore/impl/redis/RedisStore.java" />
      <jump line="519" column="25" filename="$MAVEN_REPOSITORY$/com/cainiao/cloudpath/cloudpath-kvstore-redis/2.1.1/cloudpath-kvstore-redis-2.1.1-sources.jar!/com/cainiao/cloudpath/kvstore/impl/redis/RedisStore.java" />
      <jump line="531" column="18" filename="$MAVEN_REPOSITORY$/com/cainiao/cloudpath/cloudpath-kvstore-redis/2.1.1/cloudpath-kvstore-redis-2.1.1-sources.jar!/com/cainiao/cloudpath/kvstore/impl/redis/RedisStore.java" />
      <jump line="358" column="36" filename="$MAVEN_REPOSITORY$/com/cainiao/cloudpath/cloudpath-kvstore-redis/2.1.1/cloudpath-kvstore-redis-2.1.1-sources.jar!/com/cainiao/cloudpath/kvstore/impl/redis/RedisStore.java" />
      <jump line="193" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-mapper/src/main/java/com/cainiao/lms/entity/LabourEfficiencyDTO.java" />
      <jump line="346" column="23" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="1101" column="31" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="1131" column="35" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="1366" column="47" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/LzdPprHandler.java" />
      <jump line="623" column="51" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="123" column="33" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/impl/HBaseServiceImpl.java" />
      <jump line="124" column="112" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/impl/HBaseServiceImpl.java" />
      <jump line="452" column="100" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/hsf/impl/EfficiencyServiceImpl.java" />
      <jump line="104" column="46" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/impl/HBaseServiceImpl.java" />
      <jump line="108" column="74" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/impl/HBaseServiceImpl.java" />
      <jump line="35" column="0" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/hsf/impl/EfficiencyServiceImpl.java" />
      <jump line="105" column="16" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/impl/HBaseServiceImpl.java" />
      <jump line="538" column="16" filename="$USER_HOME$/cainiao/wmplms/wmplms-service/src/main/java/com/cainiao/lms/service/hsf/impl/EfficiencyServiceImpl.java" />
      <jump line="210" column="97" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="1053" column="38" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
      <jump line="1108" column="16" filename="$USER_HOME$/cainiao/wmplms/wmplms-biz/src/main/java/com/cainiao/lms/service/ppr/handler/AbstractBasePprHandler.java" />
    </jumps>
  </component>
  <component name="VimRegisterSettings">
    <registers>
      <register name="&quot;" type="2">
        <text encoding="base64">ICAgICAgICBkb3VibGUgYSA9IDAgLyAoMCAvIDM2MDAuMCk7Cg==</text>
      </register>
      <register name="-" type="4">
        <text>3600</text>
      </register>
      <register name="/" type="4">
        <text encoding="base64">XDxuYW1lXD4=</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">ICAgICAgICBkb3VibGUgYSA9IDAgLyAoMCAvIDM2MDAuMCk7Cg==</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">ICAgICAgICBMb2NhbERhdGUgZDEgPSBMb2NhbERhdGUub2YoMjAyMCwgOSwgMTEpOwogICAgICAgIExvY2FsRGF0ZSBkMiA9IExvY2FsRGF0ZS5vZigyMDIwLCA5LCAxMCk7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFBlcmlvZC5iZXR3ZWVuKGQxLCBkMikuZ2V0RGF5cygpKTsK</text>
      </register>
      <register name="q" type="4">
        <text />
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogTmV3UG9zaXRpb25FbnVtLk9USEVSLm5hbWUoKTsK</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICBMb25nIE9CX0JaX1BMQlogPSBwb3NpdGlvbjJUaW1lLmdldChwb3NpdGlvbi5uYW1lKCkpOwo=</text>
      </register>
      <register name="u" type="4">
        <keys>
          <key char="101" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="65535" code="91" mods="130" />
          <key char="117" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="113" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="66" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="65" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="73" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="83" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="73" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="73" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="24212" code="0" mods="0" />
          <key char="29992" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="24212" code="0" mods="0" />
          <key char="29992" code="0" mods="0" />
          <key char="65535" code="69" mods="130" />
          <key char="65535" code="91" mods="130" />
          <key char="65" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="21024" code="0" mods="0" />
          <key char="38500" code="0" mods="0" />
          <key char="24212" code="0" mods="0" />
          <key char="29992" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="73" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="83" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="73" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="65535" code="91" mods="130" />
          <key char="65535" code="80" mods="130" />
          <key char="106" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="37" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="78" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="78" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="24212" code="0" mods="0" />
          <key char="29992" code="0" mods="0" />
          <key char="21517" code="0" mods="0" />
          <key char="31216" code="0" mods="0" />
          <key char="65535" code="91" mods="130" />
          <key char="106" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="26597" code="0" mods="0" />
          <key char="35810" code="0" mods="0" />
          <key char="20070" code="0" mods="0" />
          <key char="35759" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="23646" code="0" mods="0" />
          <key char="24615" code="0" mods="0" />
          <key char="65535" code="40" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="20998" code="0" mods="0" />
          <key char="39029" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="36215" code="0" mods="0" />
          <key char="22987" code="0" mods="0" />
          <key char="39029" code="0" mods="0" />
          <key char="65535" code="40" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="39029" code="0" mods="0" />
          <key char="25968" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="27599" code="0" mods="0" />
          <key char="39029" code="0" mods="0" />
          <key char="35760" code="0" mods="0" />
          <key char="24405" code="0" mods="0" />
          <key char="25968" code="0" mods="0" />
          <key char="37327" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="23454" code="0" mods="0" />
          <key char="20363" code="0" mods="0" />
          <key char="21015" code="0" mods="0" />
          <key char="34920" code="0" mods="0" />
          <key char="65535" code="37" mods="0" />
          <key char="65535" code="37" mods="0" />
          <key char="20998" code="0" mods="0" />
          <key char="39029" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="113" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="48" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="78" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="10" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="83" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="85" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="66" code="0" mods="0" />
          <key char="78" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="66" code="0" mods="0" />
          <key char="59" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="78" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="123" code="0" mods="0" />
          <key char="65535" code="10" mods="0" />
          <key char="65535" code="91" mods="130" />
          <key char="65535" code="91" mods="130" />
          <key char="106" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="65535" code="91" mods="130" />
          <key char="65535" code="91" mods="130" />
          <key char="112" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="113" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="40" mods="0" />
          <key char="65535" code="37" mods="0" />
          <key char="65535" code="37" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="91" mods="130" />
          <key char="65535" code="91" mods="130" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="65" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="84" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="78" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="84" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="78" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="82" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="82" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="10" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="65535" code="10" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="118" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="79" code="0" mods="0" />
          <key char="98" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="65535" code="38" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="65535" code="10" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="79" code="0" mods="0" />
          <key char="98" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="58" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="59" code="0" mods="0" />
          <key char="65535" code="37" mods="0" />
          <key char="65535" code="37" mods="0" />
          <key char="65535" code="37" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="84" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="78" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="65535" code="10" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="10" mods="0" />
          <key char="65535" code="37" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="29992" code="0" mods="0" />
          <key char="29992" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="24212" code="0" mods="0" />
          <key char="29992" code="0" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="21015" code="0" mods="0" />
          <key char="34920" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="39" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="20840" code="0" mods="0" />
          <key char="37096" code="0" mods="0" />
          <key char="24212" code="0" mods="0" />
          <key char="29992" code="0" mods="0" />
          <key char="21015" code="0" mods="0" />
          <key char="34920" code="0" mods="0" />
        </keys>
      </register>
      <register name="6" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGdldCBieSB3b3JrVHlwZSwgZ2V0IGJ5IHBvc2l0aW9uCg==</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAK</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICBpZiAoKQo=</text>
      </register>
      <register name="9" type="4">
        <text encoding="base64">bmFtZSgpCiAgICAgICAgICAgICAgICAgICAgOiBjb25maWdDb2RlLmNvbnRhaW5zKCJQYWNrIikgPyBOZXdQb3NpdGlvbkVudW0uUEFDSyA6IGNvbmZpZ0NvZGUuY29udGFpbnMoIlB1dFVwIikKICAgICAgICAgICAgICAgICAgICAgICAgPyBOZXdQb3NpdGlvbkVudW0uUFVUX1VQCiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uZmlnQ29kZS5jb250YWlucygiUmVjZWl2ZSIpID8gTmV3UG9zaXRpb25FbnVtLlJFQ0VJVkUgOiBOZXdQb3NpdGlvbkVudW0uT1RIRVI7CgogICAgICAgICAgICAgICAgcmV0dXJuIFBhaXIub2YocG9zaXRpb24sIHRpbWUpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY29sbGVjdChDb2xsZWN0b3JzLnRvTWFwKFBhaXI6OmdldExlZnQsIFBhaXI6OmdldFJpZ2h0KSk7CiAgICAgICAgY29udGV4dC5nZXRQYXJhbSgpLnNldFBvc2l0aW9uMlRpbWUocG9zaXRpb24yVGltZSk7CgogICAgICAgIE1hcDxOZXdQb3NpdGlvbkVudW0sIExvbmc+IHBvc2l0aW9uSWRsZTJUaW1lID0gY29uZmlncy5zdHJlYW0oKQogICAgICAgICAgICAuZmlsdGVyKG8gLT4gby5nZXRDb25maWdDb2RlKCkuY29udGFpbnMoIklkbGUiKSkKICAgICAgICAgICAgLm1hcChvIC0+IHsKICAgICAgICAgICAgICAgIGxvbmcgdGltZSA9IExvbmcucGFyc2VMb25nKG8uZ2V0VmFsdWUoKSk7CiAgICAgICAgICAgICAgICBTdHJpbmcgY29uZmlnQ29kZSA9IG8uZ2V0Q29uZmlnQ29kZSgpOwogICAgICAgICAgICAgICAgTmV3UG9zaXRpb25FbnVtIHBvc2l0aW9uID0gY29uZmlnQ29kZS5jb250YWlucygiUGljayIpID8gTmV3UG9zaXRpb25FbnVtLlBJQ0sKICAgICAgICAgICAgICAgICAgICA6IGNvbmZpZ0NvZGUuY29udGFpbnMoIlBhY2siKSA/IE5ld1Bvc2l0aW9uRW51bS5QQUNLIDogY29uZmlnQ29kZS5jb250YWlucygiUHV0VXAiKQogICAgICAgICAgICAgICAgICAgICAgICA/IE5ld1Bvc2l0aW9uRW51bS5QVVRfVVAKICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25maWdDb2RlLmNvbnRhaW5zKCJSZWNlaXZlIikgPyBOZXdQb3NpdGlvbkVudW0uUkVDRUlWRSA6IE5ld1Bvc2l0aW9uRW51bS5PVEhFUjsKCiAgICAgICAgICAgICAgICByZXR1cm4gUGFpci5vZihwb3NpdGlvbiwgdGltZSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jb2xsZWN0KENvbGxlY3RvcnMudG9NYXAoUGFpcjo6Z2V0TGVmdCwgUGFpcjo6Z2V0UmlnaHQpKTsKCiAgICAgICAgY29udGV4dC5nZXRQYXJhbSgpLnNldFBvc2l0aW9uSWRsZTJUaW1lKHBvc2l0aW9uSWRsZTJUaW1lKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBMaXN0PExhYm91ckVmZmljaWVuY3lEVE8+IG5vcm1hbGl6ZVBwckJhc2ljRGF0YShFbXBsb3llZVBwckNvbnRleHQgY29udGV4dCkgewogICAgICAgIExpc3Q8TGFib3VyRWZmaWNpZW5jeURUTz4gYmFzaWNQcHJEYXRhID0gY29udGV4dC5nZXRCYXNpY1BwckRhdGEoKTsKICAgICAgICAvLyDph43mlrDmjpLluo8KICAgICAgICBMaXN0PExhYm91ckVmZmljaWVuY3lEVE8+IHNvcnRlZFBwckRhdGE7CiAgICAgICAgaWYgKGNvbnRleHQuaXNSZXN0Q29uZmlnKCkpIHsKICAgICAgICAgICAgc29ydGVkUHByRGF0YSA9IGJhc2ljUHByRGF0YS5zdHJlYW0oKQogICAgICAgICAgICAgICAgLmZpbHRlcih0aGlzOjppc1BwckV2ZW50KQogICAgICAgICAgICAgICAgLy/lpJromZHmjonlpJblh7rlsLHppJDnmoTvvIzov5npg6jliIbkuI3nu5/orqHkurrmlYjlt6Xml7YKICAgICAgICAgICAgICAgIC5maWx0ZXIobyAtPiAhby5pc091dEVhdCgpKQogICAgICAgICAgICAgICAgLnNvcnRlZCgpCiAgICAgICAgICAgICAgICAuY29sbGVjdCh0b0xpc3QoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc29ydGVkUHByRGF0YSA9IGJhc2ljUHByRGF0YS5zdHJlYW0oKQogICAgICAgICAgICAgICAgLmZpbHRlcih0aGlzOjppc1BwckV2ZW50KQogICAgICAgICAgICAgICAgLnNvcnRlZCgpCiAgICAgICAgICAgICAgICAuY29sbGVjdCh0b0xpc3QoKSk7CiAgICAgICAgfQogICAgICAgIC8vIOmXtOaOpeW3peS9nOe7k+adn+aXtumXtOihpeWFhQogICAgICAgIHBhZGRpbmdJbmRpcmVjdExhYm91ckVuZFRpbWUoc29ydGVkUHByRGF0YSk7CgogICAgICAgIC8vIOS7u+WKoeS6pOWPieaIquaWrQogICAgICAgIGN1dE9mZkNyb3NzVGltZShzb3J0ZWRQcHJEYXRhLCBjb250ZXh0LmlzUmVhbFRpbWUoKSk7CgogICAgICAgIC8vIOiwg+aVtOi2hemVv+ebtOaOpeS7u+WKoeaXtumXtAogICAgICAgIGN1dE9mZk92ZXJ0aW1lKGNvbnRleHQsIHNvcnRlZFBwckRhdGEpOwoKICAgICAgICAvLyDlhbblroPmoIflh4bljJbmk43kvZwKICAgICAgICBvdGhlck5vcm1hbGl6ZShjb250ZXh0LCBzb3J0ZWRQcHJEYXRhKTsKCiAgICAgICAgc29ydGVkUHByRGF0YSA9IHNvcnRlZFBwckRhdGEuc3RyZWFtKCkKICAgICAgICAgICAgLnNvcnRlZCgpCiAgICAgICAgICAgIC5jb2xsZWN0KHRvTGlzdCgpKTsKCiAgICAgICAgLy8g5bCG5ZCI55CG6Ze06ZqZ5re75Yqg5YiwVELlhoUKICAgICAgICBhZGRSZWFzb25hYmxlT2ZmVGltZShjb250ZXh0LCBzb3J0ZWRQcHJEYXRhKTsKCiAgICAgICAgcmV0dXJuIHNvcnRlZFBwckRhdGE7CiAgICB9CgogICAgcHJpdmF0ZSBib29sZWFuIGlzUHByRXZlbnQoTGFib3VyRWZmaWNpZW5jeURUTyBsYWJvdXJFZmZpY2llbmN5RFRPKSB7CiAgICAgICAgaWYgKGxhYm91ckVmZmljaWVuY3lEVE8uaXNEaXJlY3RMYWJvdXIoKSkgewogICAgICAgICAgICBQb3NpdGlvbkNhdGVnb3J5Qk8gcG9zaXRpb24gPSBnZXRQb3NpdGlvbkZyb21UYXNrKGxhYm91ckVmZmljaWVuY3lEVE8pOwoKICAgICAgICAgICAgaWYgKHBvc2l0aW9uLmdldFdvcmtUeXBlKCkgPT0gUHByV29ya1R5cGVFbnVtLk9USEVSKSB7CiAgICAgICAgICAgICAgICBUYXNrVHlwZUVudW0gdGFza1R5cGVFbnVtID0gVGFza1R5cGVFbnVtLmdldEVudW1CeVZhbHVlKGxhYm91ckVmZmljaWVuY3lEVE8uZ2V0VGFza1R5cGUoKSk7CiAgICAgICAgICAgICAgICBtb25pdG9yTG9nZ2VyLmluZm8oInRhc2sgd29yayB0eXBlIG5vdCBmb3VuZHx7fXx7fXx7fXx7fXx7fXx7fXx7fSIsCiAgICAgICAgICAgICAgICAgICAgbGFib3VyRWZmaWNpZW5jeURUTy5nZXRPcGVyYXRlRGF5KCksIGxhYm91ckVmZmljaWVuY3lEVE8uZ2V0RW1wbG95ZWVOdW1iZXIoKSwKICAgICAgICAgICAgICAgICAgICBsYWJvdXJFZmZpY2llbmN5RFRPLmdldENvZGUoKSwKICAgICAgICAgICAgICAgICAgICBsYWJvdXJFZmZpY2llbmN5RFRPLmdldFRhc2tUeXBlKCksIHRhc2tUeXBlRW51bSA9PSBudWxsID8gIlVOS05PV04iIDogdGFza1R5cGVFbnVtLmdldERlc2MoKSwKICAgICAgICAgICAgICAgICAgICBsYWJvdXJFZmZpY2llbmN5RFRPLmdldEN1c3RvbVR5cGUoKSwKICAgICAgICAgICAgICAgICAgICBDdXN0b21UeXBlRW51bS5nZXRCeVZhbHVlKGxhYm91ckVmZmljaWVuY3lEVE8uZ2V0Q3VzdG9tVHlwZSgpKQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKEN1c3RvbVR5cGVFbnVtOjpnZXROYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAub3JFbHNlKCJVTktOT1dOIikKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGxhYm91ckVmZmljaWVuY3lEVE8uaXNBY3RpdmUoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBvdGhlck5vcm1hbGl6ZShFbXBsb3llZVBwckNvbnRleHQgY29udGV4dCwgTGlzdDxMYWJvdXJFZmZpY2llbmN5RFRPPiBzb3J0ZWRQcHJEYXRhKSB7CiAgICAgICAgLy8g5LyR5oGv5pe26Ze05oiq5pat5Lu75YqhCiAgICAgICAgTGlzdDxMYWJvdXJFZmZpY2llbmN5RFRPPiByZXN0cyA9IGNvbnRleHQuZ2V0UmVzdHMoKTsKICAgICAgICBpZiAoQ29sbGVjdGlvblV0aWxzLmlzTm90RW1wdHkocmVzdHMpKSB7CiAgICAgICAgICAgIExpc3Q8TGFib3VyRWZmaWNpZW5jeURUTz4gYnVpbGRMYWJvdXJzID0gbmV3IEFycmF5TGlzdDw+KCk7CiAgICAgICAgICAgIHNvcnRlZFBwckRhdGEuc3RyZWFtKCkKICAgICAgICAgICAgICAgIC5maWx0ZXIoTGFib3VyRWZmaWNpZW5jeURUTzo6aXNMbXNMYWJvdXIpCiAgICAgICAgICAgICAgICAuZm9yRWFjaChsYWJvdXIgLT4gewogICAgICAgICAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8gYnVpbGRMYWJvdXIgPSBjdXRvZmZMYWJvdXJCeVJlc3QobGFib3VyLCBjb250ZXh0LCByZXN0cyk7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGJ1aWxkTGFib3VyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRMYWJvdXJzLmFkZChidWlsZExhYm91cik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkTGFib3VyID0gY3V0b2ZmTGFib3VyQnlSZXN0KGJ1aWxkTGFib3VyLCBjb250ZXh0LCByZXN0cyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChDb2xsZWN0aW9uVXRpbHMuaXNOb3RFbXB0eShidWlsZExhYm91cnMpKSB7CiAgICAgICAgICAgICAgICBzb3J0ZWRQcHJEYXRhLmFkZEFsbChidWlsZExhYm91cnMpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChjb250ZXh0LmlzUmVzdENvbmZpZygpKSB7CiAgICAgICAgICAgIC8v56a75bKX5LyR5oGv5pe26Ze0CiAgICAgICAgICAgIExpc3Q8TGFib3VyRWZmaWNpZW5jeURUTz4gb3V0UmVzdHMgPSBjb250ZXh0LmdldE91dFJlc3QoKTsKICAgICAgICAgICAgaWYgKENvbGxlY3Rpb25VdGlscy5pc05vdEVtcHR5KG91dFJlc3RzKSkgewogICAgICAgICAgICAgICAgTGlzdDxMYWJvdXJFZmZpY2llbmN5RFRPPiBidWlsZExhYm91cnMgPSBuZXcgQXJyYXlMaXN0PD4oKTsKICAgICAgICAgICAgICAgIHNvcnRlZFBwckRhdGEuc3RyZWFtKCkKICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKExhYm91ckVmZmljaWVuY3lEVE86OmlzTG1zTGFib3VyKQogICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGxhYm91ciAtPiB7CiAgICAgICAgICAgICAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8gYnVpbGRMYWJvdXIgPSBjdXRvZmZMYWJvdXJCeVJlc3QobGFib3VyLCBjb250ZXh0LCBvdXRSZXN0cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChidWlsZExhYm91ciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZExhYm91cnMuYWRkKGJ1aWxkTGFib3VyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkTGFib3VyID0gY3V0b2ZmTGFib3VyQnlSZXN0KGJ1aWxkTGFib3VyLCBjb250ZXh0LCBvdXRSZXN0cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChDb2xsZWN0aW9uVXRpbHMuaXNOb3RFbXB0eShidWlsZExhYm91cnMpKSB7CiAgICAgICAgICAgICAgICAgICAgc29ydGVkUHByRGF0YS5hZGRBbGwoYnVpbGRMYWJvdXJzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIExhYm91ckVmZmljaWVuY3lEVE8gY3V0b2ZmTGFib3VyQnlSZXN0KExhYm91ckVmZmljaWVuY3lEVE8gbGFib3VyLCBFbXBsb3llZVBwckNvbnRleHQgY29udGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlzdDxMYWJvdXJFZmZpY2llbmN5RFRPPiByZXN0cykgewogICAgICAgIGZvciAoTGFib3VyRWZmaWNpZW5jeURUTyByZXN0IDogcmVzdHMpIHsKICAgICAgICAgICAgYm9vbGVhbiBzdGFydEJlZm9yZVJlc3RFbmRBZnRlclJlc3QgPSBsYWJvdXIuZ2V0U3RhcnRUaW1lKCkuaXNCZWZvcmUocmVzdC5nZXRTdGFydFRpbWUoKSkKICAgICAgICAgICAgICAgICYmIGxhYm91ci5nZXRDb21wdXRlRW5kVGltZSgpLmlzQWZ0ZXIocmVzdC5nZXRTdGFydFRpbWUoKSk7CiAgICAgICAgICAgIGlmIChzdGFydEJlZm9yZVJlc3RFbmRBZnRlclJlc3QpIHsKICAgICAgICAgICAgICAgIGlmIChsYWJvdXIuZ2V0Q29tcHV0ZUVuZFRpbWUoKS5pc0JlZm9yZShyZXN0LmdldENvbXB1dGVFbmRUaW1lKCkpIHx8CiAgICAgICAgICAgICAgICAgICAgbGFib3VyLmdldENvbXB1dGVFbmRUaW1lKCkuaXNFcXVhbChyZXN0LmdldENvbXB1dGVFbmRUaW1lKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuaXNSZWFsVGltZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYm91ci5nZXRQcm9jZXNzKCkuYWRkKFN0cmluZy5mb3JtYXQoIuiiq+S8keaBr+W8gOWni+aIquaWrSwg5Y6f57uT5p2f5pe26Ze0OiAlcywg6LCD5pW05ZCOOiAlcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJvdXIuZ2V0Q29tcHV0ZUVuZFRpbWUoKSwgcmVzdC5nZXRTdGFydFRpbWUoKSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsYWJvdXIuc2V0Q29tcHV0ZUVuZFRpbWUocmVzdC5nZXRTdGFydFRpbWUoKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxhYm91ci5nZXRDb21wdXRlRW5kVGltZSgpLmlzQWZ0ZXIocmVzdC5nZXRDb21wdXRlRW5kVGltZSgpKSkgewogICAgICAgICAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8gdGFpbExhYm91ciA9IERvemVyQmVhbk1hcHBlclV0aWwubWFwKGxhYm91ciwKICAgICAgICAgICAgICAgICAgICAgICAgTGFib3VyRWZmaWNpZW5jeURUTy5jbGFzcyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuaXNSZWFsVGltZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhaWxMYWJvdXIuZ2V0UHJvY2VzcygpLmFkZChTdHJpbmcuZm9ybWF0KCLooqvkvJHmga/miKrmlq0sIOWOn+W8gOWni+aXtumXtDogJXMsIOiwg+aVtOWQjjogJXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFib3VyLmdldFN0YXJ0VGltZSgpLCByZXN0LmdldEVuZFRpbWUoKSkpOwogICAgICAgICAgICAgICAgICAgICAgICBsYWJvdXIuZ2V0UHJvY2VzcygpLmFkZChTdHJpbmcuZm9ybWF0KCLooqvkvJHmga/lvIDlp4vmiKrmlq0sIOWOn+e7k+adn+aXtumXtDogJXMsIOiwg+aVtOWQjjogJXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFib3VyLmdldENvbXB1dGVFbmRUaW1lKCksIHJlc3QuZ2V0U3RhcnRUaW1lKCkpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGFpbExhYm91ci5zZXRTdGFydFRpbWUocmVzdC5nZXRFbmRUaW1lKCkpOwoKICAgICAgICAgICAgICAgICAgICBsYWJvdXIuc2V0Q29tcHV0ZUFjdHVhbE51bSgwTCk7CiAgICAgICAgICAgICAgICAgICAgbGFib3VyLnNldFBhY2thZ2VOdW0oMEwpOwogICAgICAgICAgICAgICAgICAgIGxhYm91ci5zZXRPcmRlck51bSgwTCk7CiAgICAgICAgICAgICAgICAgICAgbGFib3VyLnNldFNrdU51bSgwTCk7CiAgICAgICAgICAgICAgICAgICAgbGFib3VyLnNldENvbXB1dGVFbmRUaW1lKHJlc3QuZ2V0U3RhcnRUaW1lKCkpOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFpbExhYm91cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgTGlzdDxMYWJvdXJFZmZpY2llbmN5RFRPPiBnZW5lcmF0ZVBwcklkbGVEYXRhKEVtcGxveWVlUHByQ29udGV4dCBjb250ZXh0KSB7CiAgICAgICAgTGlzdDxMYWJvdXJFZmZpY2llbmN5RFRPPiBjb21wdXRlRGF0YSA9IGNvbnRleHQuZ2V0Tm9ybWFsaXplZFBwckRhdGEoKS5zdHJlYW0oKQogICAgICAgICAgICAuZmlsdGVyKG8gLT4gby5nZXRUeXBlKCkgIT0gQVRURU5EQU5DRSkKICAgICAgICAgICAgLmZpbHRlcihvIC0+IG8uZ2V0VHlwZSgpICE9IFNISUZUKQogICAgICAgICAgICAuZmlsdGVyKG8gLT4gby5nZXRUeXBlKCkgIT0gUkVTVCkKICAgICAgICAgICAgLmNvbGxlY3QodG9MaXN0KCkpOwoKICAgICAgICBMaXN0PExhYm91ckVmZmljaWVuY3lEVE8+IGlkbGVEYXRhID0gbmV3IEFycmF5TGlzdDw+KDMyKTsKCiAgICAgICAgaW50IHNpemUgPSBjb21wdXRlRGF0YS5zaXplKCk7CiAgICAgICAgTG9jYWxEYXRlVGltZSBjdXJyZW50VGltZSA9IExvY2FsRGF0ZVV0aWwuTUlOOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpICE9IHNpemUgLSAxKSB7CiAgICAgICAgICAgICAgICBMYWJvdXJFZmZpY2llbmN5RFRPIGN1cnJlbnRFdmVudCA9IGNvbXB1dGVEYXRhLmdldChpKTsKICAgICAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8gbmV4dEV2ZW50ID0gY29tcHV0ZURhdGEuZ2V0KGkgKyAxKTsKICAgICAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgY3VycmVudEV2ZW50RW5kVGltZSA9IGN1cnJlbnRFdmVudC5nZXRDb21wdXRlRW5kVGltZSgpOwogICAgICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBuZXh0RXZlbnRTdGFydFRpbWUgPSBuZXh0RXZlbnQuZ2V0U3RhcnRUaW1lKCk7CiAgICAgICAgICAgICAgICBpZiAobmV4dEV2ZW50U3RhcnRUaW1lLmlzQmVmb3JlKGN1cnJlbnRUaW1lKSB8fCBuZXh0RXZlbnRTdGFydFRpbWUuaXNFcXVhbChjdXJyZW50VGltZSkpIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lID0gY3VycmVudEV2ZW50RW5kVGltZTsKICAgICAgICAgICAgICAgIGxvbmcgZHVyYXRpb25NaWxsaXMgPSBEdXJhdGlvbi5iZXR3ZWVuKGN1cnJlbnRFdmVudEVuZFRpbWUsIG5leHRFdmVudFN0YXJ0VGltZSkudG9NaWxsaXMoKTsKICAgICAgICAgICAgICAgIGlmIChkdXJhdGlvbk1pbGxpcyA+IDApIHsKICAgICAgICAgICAgICAgICAgICAvLyDnoa7orqTpl7Lnva7kuovku7bnmoTooYzkuJoKICAgICAgICAgICAgICAgICAgICBMYWJvdXJFZmZpY2llbmN5RFRPIGlkbGVOZWFyZXN0RXZlbnQgPSBmaW5kSWRsZU5lYXJlc3RFdmVudChpLCBjb21wdXRlRGF0YSk7CiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGlkbGVJbmR1c3RyeUNvZGUgPSBpZGxlTmVhcmVzdEV2ZW50LmdldEluZHVzdHJ5Q29kZSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0JsYW5rKGlkbGVJbmR1c3RyeUNvZGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVJbmR1c3RyeUNvZGUgPSBjb250ZXh0LmdldFBhcmFtKCkuZ2V0V29ya3BsYWNlSW5kdXN0cnkoKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIExpc3Q8TGFib3VyRWZmaWNpZW5jeURUTz4gcmVzdHMgPSBjb250ZXh0LmdldFJlc3RzKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxtc0VudkNvbmZpZy5pc0RlcGxveU92ZXJzZWFzKCkgJiYgY29udGV4dC5nZXRQYXJhbSgpLmdldFVzZVJlYWxSZXN0KCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdHMgPSBjb250ZXh0LmdldFJlYWxSZXN0cygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoQ29sbGVjdGlvblV0aWxzLmlzTm90RW1wdHkocmVzdHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgaWRsZVN0YXJ0VGltZSA9IGN1cnJlbnRFdmVudEVuZFRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgaWRsZUVuZFRpbWUgPSBuZXh0RXZlbnRTdGFydFRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoTGFib3VyRWZmaWNpZW5jeURUTyByZXN0IDogcmVzdHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4gcmVzdFN0YXJ0QmVmb3JlSWRsZVN0YXJ0UmVzdEVuZEFmdGVySWRsZVN0YXJ0ID0gKHJlc3QuZ2V0U3RhcnRUaW1lKCkuY29tcGFyZVRvKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVTdGFydFRpbWUpIDw9IDApICYmIHJlc3QuZ2V0RW5kVGltZSgpLmlzQWZ0ZXIoaWRsZVN0YXJ0VGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdFN0YXJ0QmVmb3JlSWRsZVN0YXJ0UmVzdEVuZEFmdGVySWRsZVN0YXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRsZVN0YXJ0VGltZSA9IHJlc3QuZ2V0RW5kVGltZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4gcmVzdEJldHdlZW5JZGxlID0gcmVzdC5nZXRTdGFydFRpbWUoKS5jb21wYXJlVG8oaWRsZVN0YXJ0VGltZSkgPj0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlc3QuZ2V0RW5kVGltZSgpLmNvbXBhcmVUbyhpZGxlRW5kVGltZSkgPD0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN0QmV0d2VlbklkbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMYWJvdXJFZmZpY2llbmN5RFRPIGlkbGVFdmVudCA9IERvemVyQmVhbk1hcHBlclV0aWwubWFwKGlkbGVOZWFyZXN0RXZlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8uY2xhc3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVFdmVudC5zZXRDb2RlKGN1cnJlbnRFdmVudC5nZXRDb2RlKCkgKyAiLSIgKyBuZXh0RXZlbnQuZ2V0Q29kZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGxlRXZlbnQuc2V0U3RhcnRUaW1lKGlkbGVTdGFydFRpbWUucGx1c0hvdXJzKDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGxlRXZlbnQuc2V0RW5kVGltZShyZXN0LmdldFN0YXJ0VGltZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGxlRXZlbnQuc2V0SW5kdXN0cnlDb2RlKGlkbGVJbmR1c3RyeUNvZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVEYXRhLmFkZChpZGxlRXZlbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGxlU3RhcnRUaW1lID0gcmVzdC5nZXRFbmRUaW1lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbGVhbiByZXN0U3RhcnRBZnRlcklkbGVTdGFydEJlZm9yZUlkbGVFbmRSZXN0RW5kQWZ0ZXJJZGxlRW5kID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN0LmdldFN0YXJ0VGltZSgpLmNvbXBhcmVUbyhpZGxlU3RhcnRUaW1lKSA+PSAwICYmIHJlc3QuZ2V0U3RhcnRUaW1lKCkuY29tcGFyZVRvKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGxlRW5kVGltZSkgPD0gMCAmJiByZXN0LmdldEVuZFRpbWUoKS5jb21wYXJlVG8oaWRsZUVuZFRpbWUpID49IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdFN0YXJ0QWZ0ZXJJZGxlU3RhcnRCZWZvcmVJZGxlRW5kUmVzdEVuZEFmdGVySWRsZUVuZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8gaWRsZUV2ZW50ID0gRG96ZXJCZWFuTWFwcGVyVXRpbC5tYXAoaWRsZU5lYXJlc3RFdmVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGFib3VyRWZmaWNpZW5jeURUTy5jbGFzcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRsZUV2ZW50LnNldENvZGUoY3VycmVudEV2ZW50LmdldENvZGUoKSArICItIiArIG5leHRFdmVudC5nZXRDb2RlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVFdmVudC5zZXRTdGFydFRpbWUoaWRsZVN0YXJ0VGltZS5wbHVzSG91cnMoMCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVFdmVudC5zZXRFbmRUaW1lKHJlc3QuZ2V0U3RhcnRUaW1lKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVFdmVudC5zZXRJbmR1c3RyeUNvZGUoaWRsZUluZHVzdHJ5Q29kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRsZURhdGEuYWRkKGlkbGVFdmVudCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVTdGFydFRpbWUgPSByZXN0LmdldEVuZFRpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkbGVTdGFydFRpbWUuaXNCZWZvcmUoaWRsZUVuZFRpbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMYWJvdXJFZmZpY2llbmN5RFRPIGlkbGVFdmVudCA9IERvemVyQmVhbk1hcHBlclV0aWwubWFwKGlkbGVOZWFyZXN0RXZlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGFib3VyRWZmaWNpZW5jeURUTy5jbGFzcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGxlRXZlbnQuc2V0Q29kZShjdXJyZW50RXZlbnQuZ2V0Q29kZSgpICsgIi0iICsgbmV4dEV2ZW50LmdldENvZGUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGxlRXZlbnQuc2V0U3RhcnRUaW1lKGlkbGVTdGFydFRpbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRsZUV2ZW50LnNldEVuZFRpbWUoaWRsZUVuZFRpbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRsZUV2ZW50LnNldEluZHVzdHJ5Q29kZShpZGxlSW5kdXN0cnlDb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVEYXRhLmFkZChpZGxlRXZlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5rKh5pyJ5LyR5oGv5pe25q61CiAgICAgICAgICAgICAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8gaWRsZUV2ZW50ID0gRG96ZXJCZWFuTWFwcGVyVXRpbC5tYXAoaWRsZU5lYXJlc3RFdmVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8uY2xhc3MpOwogICAgICAgICAgICAgICAgICAgICAgICBpZGxlRXZlbnQuc2V0Q29kZShjdXJyZW50RXZlbnQuZ2V0Q29kZSgpICsgIi0iICsgbmV4dEV2ZW50LmdldENvZGUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVFdmVudC5zZXRTdGFydFRpbWUoY3VycmVudEV2ZW50RW5kVGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVFdmVudC5zZXRFbmRUaW1lKG5leHRFdmVudFN0YXJ0VGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVFdmVudC5zZXRJbmR1c3RyeUNvZGUoaWRsZUluZHVzdHJ5Q29kZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZGxlRGF0YS5hZGQoaWRsZUV2ZW50KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaWRsZURhdGE7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgSW50ZWdlciBkZWxldGVQcmV2aW91c1BwckRhdGEoRW1wbG95ZWVQcHJDb250ZXh0IGNvbnRleHQpIHsKICAgICAgICAvLyDliKDpmaTlkZjlt6XlvZPlpKnmiYDmnInmlbDmja4KICAgICAgICBpZiAoU3RyZXNzVGVzdGluZ1V0aWwuaXNUZXN0Rmxvd0FsbCgpKSB7CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJkZWxldGUgdGVzdCBmbG93IGFsbCBkYXRhLCBkYXRlOiB7fSwgZW1wbG95ZWU6IHt9IiwKICAgICAgICAgICAgICAgIGNvbnRleHQuZ2V0RGF0ZSgpLCBjb250ZXh0LmdldEVtcGxveWVlKCkuZ2V0TnVtYmVyKCkpOwogICAgICAgICAgICByZXR1cm4gcHByVGVzdE1hbmFnZXIuZGVsZXRlKG51bGwsIGNvbnRleHQuZ2V0RW1wbG95ZWUoKS5nZXROdW1iZXIoKSwgY29udGV4dC5nZXREYXRlKCkpOwogICAgICAgIH0KCgogICAgICAgIC8vIHBwcuWGmW15c3Fs77yM5byC5q2l6Z2e6Zi75aGeCiAgICAgICAgbGFib3VyUHByUmVzdWx0U2VydmljZS5kZWxldGUoCiAgICAgICAgICAgIG5ldyBMbXNMYWJvdXJFZmZpY2llbmN5UHByUmVzdWx0RE8oY29udGV4dC5nZXRFbXBsb3llZSgpLmdldE51bWJlcigpLCBjb250ZXh0LmdldERhdGUoKSkpOwoKICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBJbnRlZ2VyIGluc2VydFBwckRhdGEoRW1wbG95ZWVQcHJDb250ZXh0IGNvbnRleHQpIHsKICAgICAgICBMaXN0PExtc0xhYm91ckVmZmljaWVuY3lQcHJCTz4gY3VycmVudFBwcnMgPSBjb250ZXh0LmdldExtc0xhYm91ckVmZmljaWVuY3lQcHJzKCk7CiAgICAgICAgaWYgKFN0cmVzc1Rlc3RpbmdVdGlsLmlzVGVzdEZsb3dBbGwoKSkgewogICAgICAgICAgICBsb2dnZXIuaW5mbygiaW5zZXJ0IHRlc3QgZmxvdyBhbGwgZGF0YSwgZGF0ZToge30sIGVtcGxveWVlOiB7fSIsCiAgICAgICAgICAgICAgICBjb250ZXh0LmdldERhdGUoKSwgY29udGV4dC5nZXRFbXBsb3llZSgpLmdldE51bWJlcigpKTsKICAgICAgICAgICAgTGlzdDxMbXNMYWJvdXJFZmZpY2llbmN5UHByVGVzdERPPiBwcHJzID0gRG96ZXJCZWFuTWFwcGVyVXRpbC5tYXBMaXN0KGN1cnJlbnRQcHJzLAogICAgICAgICAgICAgICAgTG1zTGFib3VyRWZmaWNpZW5jeVBwclRlc3RETy5jbGFzcyk7CgogICAgICAgICAgICByZXR1cm4gcHByVGVzdE1hbmFnZXIuYmF0Y2hJbnNlcnQocHBycyk7CiAgICAgICAgfQoKICAgICAgICAvLyDku45IQmFzZeiOt+WPluS4iuS4gOasoeiuoeeul+e7k+aenCwg5q+U5a+55ZCO6L+b6KGMcmVwbGFjZSBpbnRvCiAgICAgICAgU3RyaW5nIHJvd0tleSA9IGNvbnRleHQuZ2V0RW1wbG95ZWUoKS5nZXROdW1iZXIoKSArICJfIiArIExvY2FsRGF0ZVV0aWwuZm9ybWF0RGF0ZShjb250ZXh0LmdldERhdGUoKSk7CiAgICAgICAgTGlzdDxMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8+IHByZXZpb3VzUHBycyA9IGhCYXNlU2VydmljZS5nZXRMYWJvdXJFZmZpY2llbmN5UHByQm9zKHJvd0tleSkuZ2V0VmFsdWUoKTsKCiAgICAgICAgTGlzdDxMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8+IG1lcmdlUHBycyA9IG1lcmdlUHBycyhwcmV2aW91c1BwcnMsIGN1cnJlbnRQcHJzKTsKICAgICAgICBsb2dnZXIuaW5mbygibWVyZ2UgcHBycywgcHJldmlvdXM6IHt9LCBjdXJyZW50OiB7fSwgbWVyZ2U6IHt9IiwgcHJldmlvdXNQcHJzLnNpemUoKSwgY3VycmVudFBwcnMuc2l6ZSgpLAogICAgICAgICAgICBtZXJnZVBwcnMuc2l6ZSgpKTsKICAgICAgICBtZXJnZVBwcnMuZm9yRWFjaChvIC0+IHsKICAgICAgICAgICAgLy8g5LiN5a2Y5YKo6K6h566X6L+H56iLCiAgICAgICAgICAgIG8uc2V0Q29tcHV0ZVByb2Nlc3MobnVsbCk7CiAgICAgICAgICAgIGlmIChvLmdldERlbGV0ZWQoKSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBvLnNldERlbGV0ZWQoMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8g5a2Y5YKoSEJhc2UKICAgICAgICBMaXN0PExtc0xhYm91ckVmZmljaWVuY3lQcHJCTz4gaEJhc2VSZXN1bHQgPSBtZXJnZVBwcnMuc3RyZWFtKCkKICAgICAgICAgICAgLmZpbHRlcihvIC0+IG8uZ2V0RGVsZXRlZCgpID09IG51bGwgfHwgby5nZXREZWxldGVkKCkgPT0gMCkKICAgICAgICAgICAgLmNvbGxlY3QodG9MaXN0KCkpOwogICAgICAgIGhCYXNlU2VydmljZS5zYXZlTGFib3VyRWZmaWNpZW5jeVBwckJvcyhyb3dLZXksIGhCYXNlUmVzdWx0KTsKCiAgICAgICAgLy8g5a2Y5YKoQURCCiAgICAgICAgTGlzdDxMbXNMYWJvdXJFZmZpY2llbmN5UHByUmVzdWx0QWRiRE8+IGFkYlBwcnMgPSBEb3plckJlYW5NYXBwZXJVdGlsCiAgICAgICAgICAgIC5tYXBMaXN0KG1lcmdlUHBycywgTG1zTGFib3VyRWZmaWNpZW5jeVBwclJlc3VsdEFkYkRPLmNsYXNzKTsKICAgICAgICBJbnRlZ2VyIHJlc3VsdCA9IHBwck1vZHVsZU1hbmFnZXIuYmF0Y2hJbnNlcnQoYWRiUHBycyk7CgogICAgICAgIGxhYm91clBwclJlc3VsdFNlcnZpY2Uuc2F2ZShEb3plckJlYW5NYXBwZXJVdGlsLm1hcExpc3QobWVyZ2VQcHJzLCBMbXNMYWJvdXJFZmZpY2llbmN5UHByUmVzdWx0RE8uY2xhc3MpKTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIHByaXZhdGUgTGlzdDxMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8+IG1lcmdlUHBycyhMaXN0PExtc0xhYm91ckVmZmljaWVuY3lQcHJCTz4gcHJldmlvdXNQcHJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpc3Q8TG1zTGFib3VyRWZmaWNpZW5jeVBwckJPPiBjdXJyZW50UHBycykgewogICAgICAgIGlmIChDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eShwcmV2aW91c1BwcnMpKSB7CiAgICAgICAgICAgIHJldHVybiBjdXJyZW50UHByczsKICAgICAgICB9CgogICAgICAgIGlmIChDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eShjdXJyZW50UHBycykpIHsKICAgICAgICAgICAgLy8g6ICB5pWw5o2u572u5Yig6Zmk5L2NCiAgICAgICAgICAgIHByZXZpb3VzUHBycy5mb3JFYWNoKHByZXZpb3VzUHByIC0+IHByZXZpb3VzUHByLnNldERlbGV0ZWQoMSkpOwogICAgICAgICAgICByZXR1cm4gcHJldmlvdXNQcHJzOwogICAgICAgIH0KCiAgICAgICAgTGlzdDxMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8+IG1lcmdlUmVzdWx0ID0gbmV3IEFycmF5TGlzdDw+KDE2KTsKCiAgICAgICAgTWFwPFN0cmluZywgTGlzdDxMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8+PiBwcmV2aW91c0tleTJQcHJzID0gcHJldmlvdXNQcHJzLnN0cmVhbSgpCiAgICAgICAgICAgIC5jb2xsZWN0KENvbGxlY3RvcnMuZ3JvdXBpbmdCeSgKICAgICAgICAgICAgICAgIHBwciAtPiBwcHIuZ2V0V2FyZWhvdXNlSWQoKSArIHBwci5nZXRPcGVyYXRlTW9udGgoKSArIHBwci5nZXRPcGVyYXRlRGF5KCkgKyBwcHIuZ2V0T3BlcmF0ZVRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgcHByLmdldEluZHVzdHJ5Q29kZSgpICsgcHByLmdldFdvcmtUeXBlKCkgKyBwcHIuZ2V0RW1wbG95ZWVOdW1iZXIoKSkpOwoKICAgICAgICBNYXA8U3RyaW5nLCBMaXN0PExtc0xhYm91ckVmZmljaWVuY3lQcHJCTz4+IGN1cnJlbnRLZXkyUHBycyA9IGN1cnJlbnRQcHJzLnN0cmVhbSgpCiAgICAgICAgICAgIC5jb2xsZWN0KENvbGxlY3RvcnMuZ3JvdXBpbmdCeSgKICAgICAgICAgICAgICAgIHBwciAtPiBwcHIuZ2V0V2FyZWhvdXNlSWQoKSArIHBwci5nZXRPcGVyYXRlTW9udGgoKSArIHBwci5nZXRPcGVyYXRlRGF5KCkgKyBwcHIuZ2V0T3BlcmF0ZVRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgcHByLmdldEluZHVzdHJ5Q29kZSgpICsgcHByLmdldFdvcmtUeXBlKCkgKyBwcHIuZ2V0RW1wbG95ZWVOdW1iZXIoKSkpOwoKICAgICAgICBwcmV2aW91c0tleTJQcHJzLmZvckVhY2goKGtleSwgcHJldmlvdXNQcHIpIC0+IHsKICAgICAgICAgICAgTGlzdDxMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8+IGN1cnJlbnRQcHIgPSBjdXJyZW50S2V5MlBwcnMuZ2V0KGtleSk7CiAgICAgICAgICAgIC8vIOiAgeaciSwg5paw5rKh5pyJLCDlsIbogIHmlbDmja7nva7liKDpmaTmoIfor4YKICAgICAgICAgICAgaWYgKENvbGxlY3Rpb25VdGlscy5pc0VtcHR5KGN1cnJlbnRQcHIpKSB7CiAgICAgICAgICAgICAgICBwcmV2aW91c1Bwci5mb3JFYWNoKG8gLT4gby5zZXREZWxldGVkKDEpKTsKICAgICAgICAgICAgICAgIG1lcmdlUmVzdWx0LmFkZEFsbChwcmV2aW91c1Bwcik7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8g5re75Yqg5paw54mI5pys5pWw5o2uCiAgICAgICAgY3VycmVudEtleTJQcHJzLmZvckVhY2goKGtleSwgY3VycmVudFBwcikgLT4gbWVyZ2VSZXN1bHQuYWRkQWxsKGN1cnJlbnRQcHIpKTsKCiAgICAgICAgcmV0dXJuIG1lcmdlUmVzdWx0OwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgYmVmb3JlUHJvY2VzcyhFbXBsb3llZVBwckNvbnRleHQgcHByQ29udGV4dCkgewogICAgICAgIC8vIGRvIG5vdGhpbmcKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBMaXN0PExtc0xhYm91ckVmZmljaWVuY3lQcHJCTz4gcHJvY2VzcyhFbXBsb3llZVBwckNvbnRleHQgcHByQ29udGV4dCkgewogICAgICAgIExpc3Q8TGFib3VyRWZmaWNpZW5jeURUTz4gbm9ybWFsaXplUHByRGF0YSA9IHBwckNvbnRleHQuZ2V0Tm9ybWFsaXplZFBwckRhdGEoKTsKCiAgICAgICAgZm9yIChMYWJvdXJFZmZpY2llbmN5RFRPIGN1cnJlbnRFdmVudCA6IG5vcm1hbGl6ZVBwckRhdGEpIHsKICAgICAgICAgICAgLy8g57uf6K6h5bel5L2c6YePCiAgICAgICAgICAgIGNvbXB1dGVXb3JrbG9hZChwcHJDb250ZXh0LCBjdXJyZW50RXZlbnQpOwoKICAgICAgICAgICAgLy8g57uf6K6h5bel5L2c5pe26ZW/CiAgICAgICAgICAgIGNvbXB1dGVXb3JrVGltZShwcHJDb250ZXh0LCBjdXJyZW50RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgLy8g57uf6K6h6Zey572u5pe26ZW/CiAgICAgICAgTGlzdDxMYWJvdXJFZmZpY2llbmN5RFRPPiBpZGxlRGF0YSA9IHBwckNvbnRleHQuZ2V0SWRsZURhdGEoKTsKICAgICAgICBmb3IgKExhYm91ckVmZmljaWVuY3lEVE8gaWRsZURUTyA6IGlkbGVEYXRhKSB7CiAgICAgICAgICAgIGNvbXB1dGVJZGxlVGltZShwcHJDb250ZXh0LCBpZGxlRFRPKTsKICAgICAgICB9CgogICAgICAgIC8vIOe7n+iuoeiAg+WLpOaXtumVvwogICAgICAgIGNvbXB1dGVBdHRlbmRhbmNlVGltZShwcHJDb250ZXh0KTsKCiAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpc3Q8PihwcHJDb250ZXh0LmdldFBhcmFtKCkuZ2V0VXNlcjJQcHIoKS52YWx1ZXMoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgY29tcHV0ZUF0dGVuZGFuY2VUaW1lKEVtcGxveWVlUHByQ29udGV4dCBwcHJDb250ZXh0KSB7CiAgICAgICAgcHByQ29udGV4dC5nZXRQYXJhbSgpLmdldFVzZXIyUHByKCkudmFsdWVzKCkKICAgICAgICAgICAgLy8g5Yid5aeL5YyW6ICD5Yuk5pe26ZW/CiAgICAgICAgICAgIC5mb3JFYWNoKHBwciAtPiBwcHIuc2V0QXR0ZW5kYW5jZVRpbWUocHByLmdldFdvcmtUaW1lKCkgKyBwcHIuZ2V0SW5kaXJlY3RUaW1lKCkgKyBwcHIuZ2V0SWRsZVRpbWUoKSkpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgYWZ0ZXJQcm9jZXNzKEVtcGxveWVlUHByQ29udGV4dCBjb250ZXh0KSB7CiAgICAgICAgLy8g6K6h566X5Lq65pWI5Ye65Yuk5bel5pe2CiAgICAgICAgZG9Db21wdXRlRWZmaWNpZW5jeUF0dGVuZFRpbWUoY29udGV4dCk7CiAgICB9CgogICAgQEFsbEFyZ3NDb25zdHJ1Y3RvcgogICAgQE5vQXJnc0NvbnN0cnVjdG9yCiAgICBjbGFzcyBFZmZpY2llbmN5QXR0ZW5kVGltZSB7CiAgICAgICAgbG9uZyBhbGxUaW1lID0gMEw7CiAgICAgICAgbG9uZyB3aXRob3V0SWRsZVRpbWUgPSAwTDsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBkb0NvbXB1dGVFZmZpY2llbmN5QXR0ZW5kVGltZShFbXBsb3llZVBwckNvbnRleHQgY29udGV4dCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIE9wZXJhdGlvbkNvbmZpZ0RPIGNvbmZpZyA9IG9wZXJhdGlvbkNvbmZpZ01hbmFnZXIuZmluZEVmZmljaWVuY3lVc2VyUHByQ29uZmlnKAogICAgICAgICAgICAgICAgY29udGV4dC5nZXRXb3JrcGxhY2UoKS5nZXRDcENvZGUoKSk7CgogICAgICAgICAgICBib29sZWFuIG5lZWRDb21wdXRlID0gQm9vbGVhbi5GQUxTRTsKICAgICAgICAgICAgaWYgKG5vbk51bGwoY29uZmlnKSkgewogICAgICAgICAgICAgICAgU2V0IGljTGlzdCA9IEpTT04ucGFyc2VPYmplY3QoY29uZmlnLmdldFZhbHVlKCksIFNldC5jbGFzcyk7CiAgICAgICAgICAgICAgICBpZiAoQ29sbGVjdGlvblV0aWxzLmlzTm90RW1wdHkoaWNMaXN0KSAmJiBpY0xpc3QuY29udGFpbnMoCiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5nZXRXb3JrcGxhY2UoKS5nZXRJbmR1c3RyeUNvbGxlY3Rpb24oKSkpIHsKICAgICAgICAgICAgICAgICAgICBuZWVkQ29tcHV0ZSA9IEJvb2xlYW4uVFJVRTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY29udGV4dC5pc1JlYWxUaW1lKCkpIHsKICAgICAgICAgICAgICAgIG5lZWRDb21wdXRlID0gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChuZWVkQ29tcHV0ZSkgewogICAgICAgICAgICAgICAgTWFwPExvY2FsRGF0ZSwgRWZmaWNpZW5jeUF0dGVuZFRpbWU+IGRhdGUyVGltZSA9IG5ldyBIYXNoTWFwPD4oKTsKICAgICAgICAgICAgICAgIGZvciAoTG1zTGFib3VyRWZmaWNpZW5jeVBwckJPIGJvIDogY29udGV4dC5nZXRMbXNMYWJvdXJFZmZpY2llbmN5UHBycygpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5Y+q6ICD6JmR5pys5LuT55qEcHBy5L2c5LiaLOWFtuS7luS7k+eahOS9nOS4muWcqOWFtuS7luS7k+inpuWPkeiuoeeulwogICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3RzLmVxdWFscyhiby5nZXRXYXJlaG91c2VJZCgpLCBjb250ZXh0LmdldFdvcmtwbGFjZSgpLmdldFdvcmtQbGFjZUlkKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWPquiuoeeul+mdnuWkluWHuuWwsemkkOexu+eahHBwcuaVsOaNrgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU9iamVjdHMuZXF1YWxzKGJvLmdldFdvcmtUeXBlKCksIFRZWFhfRUFULmdldENvZGUoKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVmZmljaWVuY3lBdHRlbmRUaW1lIGVmZmljaWVuY3lBdHRlbmRUaW1lID0gTW9yZU9iamVjdHMuZmlyc3ROb25OdWxsKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUyVGltZS5nZXQoYm8uZ2V0T3BlcmF0ZURheSgpKSwgbmV3IEVmZmljaWVuY3lBdHRlbmRUaW1lKDBMLCAwTCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWZmaWNpZW5jeUF0dGVuZFRpbWUud2l0aG91dElkbGVUaW1lICs9IGJvLmdldEluZGlyZWN0VGltZSgpICsgYm8uZ2V0V29ya1RpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVmZmljaWVuY3lBdHRlbmRUaW1lLmFsbFRpbWUgKz0gYm8uZ2V0QXR0ZW5kYW5jZVRpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUyVGltZS5wdXQoYm8uZ2V0T3BlcmF0ZURheSgpLCBlZmZpY2llbmN5QXR0ZW5kVGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oIuiuoeeul3BwcueUn+aIkOWHuuWLpOW3peaXtjp7fSwge30sIHt9LCB7fSIsIGNvbnRleHQuZ2V0RW1wbG95ZWUoKS5nZXROdW1iZXIoKSwKICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmdldFdvcmtwbGFjZSgpLmdldE5hbWUoKSwgY29udGV4dC5nZXRXb3JrcGxhY2UoKS5nZXRDb2RlKCksIEpTT04udG9KU09OU3RyaW5nKGRhdGUyVGltZSkpOwoKICAgICAgICAgICAgICAgIExpc3Q8RGluZ1RhbGtBdHRlbmRhbmNlU3RhdGlzdGljc0RPPiBhdHRlbmRhbmNlTGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpOwogICAgICAgICAgICAgICAgaWYgKENvbGxlY3Rpb25VdGlscy5pc0VtcHR5KGNvbnRleHQuZ2V0TG1zTGFib3VyRWZmaWNpZW5jeVBwcnMoKSkpIHsKICAgICAgICAgICAgICAgICAgICBFZmZpY2llbmN5QXR0ZW5kVGltZSBkZWZhdWx0VGltZSA9IG5ldyBFZmZpY2llbmN5QXR0ZW5kVGltZSgpOwogICAgICAgICAgICAgICAgICAgIFBhaXI8TG9jYWxEYXRlLCBFZmZpY2llbmN5QXR0ZW5kVGltZT4gZGF0ZTJBdHRlbmRUaW1lID0gUGFpci5vZihjb250ZXh0LmdldERhdGUoKSwgZGVmYXVsdFRpbWUpOwoKICAgICAgICAgICAgICAgICAgICBEaW5nVGFsa0F0dGVuZGFuY2VTdGF0aXN0aWNzRE8gYXR0ZW5kYW5jZSA9IGdldEF0dGVuZGFuY2UoY29udGV4dCwgZGF0ZTJBdHRlbmRUaW1lKTsKICAgICAgICAgICAgICAgICAgICBhdHRlbmRhbmNlTGlzdC5hZGQoYXR0ZW5kYW5jZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZvciAoRW50cnk8TG9jYWxEYXRlLCBFZmZpY2llbmN5QXR0ZW5kVGltZT4gZW50cnkgOiBkYXRlMlRpbWUuZW50cnlTZXQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBQYWlyPExvY2FsRGF0ZSwgRWZmaWNpZW5jeUF0dGVuZFRpbWU+IGRhdGUyQXR0ZW5kVGltZSA9IFBhaXIub2YoZW50cnkuZ2V0S2V5KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5nZXRWYWx1ZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgRGluZ1RhbGtBdHRlbmRhbmNlU3RhdGlzdGljc0RPIGF0dGVuZGFuY2UgPSBnZXRBdHRlbmRhbmNlKGNvbnRleHQsIGRhdGUyQXR0ZW5kVGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVuZGFuY2VMaXN0LmFkZChhdHRlbmRhbmNlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhdHRlbmRhbmNlTWFuYWdlci5iYXRjaEluc2VydE9yVXBkYXRlT25seUJhc2VJbmZvKGF0dGVuZGFuY2VMaXN0KTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihTdHJpbmcuZm9ybWF0KCJwcHLovazogIPli6Tml7bplb/miqXplJk6JXMsICVzIiwgY29udGV4dC5nZXRFbXBsb3llZSgpLmdldE51bWJlcigpLCBjb250ZXh0LmdldERhdGUoKSksIGUpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIERpbmdUYWxrQXR0ZW5kYW5jZVN0YXRpc3RpY3NETyBnZXRBdHRlbmRhbmNlKEVtcGxveWVlUHByQ29udGV4dCBjb250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYWlyPExvY2FsRGF0ZSwgRWZmaWNpZW5jeUF0dGVuZFRpbWU+IGVudHJ5KSB7CiAgICAgICAgLy8g5pqC5pe25LiN6ICD6JmR6ZKJ6ZKJdXNlcklk5Y+Y5YyW55qE5oOF5Ya1CiAgICAgICAgU3RyaW5nIGRpbmdVc2VySWQ7CiAgICAgICAgRW1wbG95ZWVETyBjaGFuZ2VMb2cgPSBnZXRBdHRlbmRhbmNlRGF5RW1wbG95ZWVDaGFuZ2VMb2coY29udGV4dC5nZXRXb3JrcGxhY2UoKS5nZXRDb2RlKCksCiAgICAgICAgICAgIGNvbnRleHQuZ2V0RW1wbG95ZWUoKS5nZXROdW1iZXIoKSwgZW50cnkuZ2V0S2V5KCkpOwogICAgICAgIGlmIChub25OdWxsKGNoYW5nZUxvZykpIHsKICAgICAgICAgICAgZGluZ1VzZXJJZCA9IGNoYW5nZUxvZy5nZXREaW5nVXNlcklkKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGluZ1VzZXJJZCA9IGNvbnRleHQuZ2V0RW1wbG95ZWUoKS5nZXREaW5nVXNlcklkKCk7CiAgICAgICAgICAgIC8vIOWmguaenOaYr+WFtuS7luS7k+eahOWRmOW3pSzmsqHmnIljaGFuZ2VMb2cs6YCg5LiA5p2hY2hhbmdlTG9nCiAgICAgICAgICAgIGNoYW5nZUxvZyA9IGNvbnRleHQuZ2V0RW1wbG95ZWUoKTsKICAgICAgICB9CgogICAgICAgIC8vIOeyvuehrue7n+iuoemcgOimgeaMieavj+WkqeeahGNoYW5nZUxvZwogICAgICAgIC8vIOWyl+S9jeWSjOaYr+WQpuS4uuaUr+aMgeWyl+S7peW9k+WJjeS6uuWRmOWxnuaAp+S4uuS4uwogICAgICAgIExvbmcgcG9zaXRpb24gPSBnZXRQcHJFbXBsb3llZVBvc2l0aW9uKGNoYW5nZUxvZywgY29udGV4dC5nZXRFbXBsb3llZSgpKTsKICAgICAgICBib29sZWFuIGlzU3VwcG9ydCA9IGlzU3VwcG9ydChwb3NpdGlvbik7CgogICAgICAgIERpbmdUYWxrQXR0ZW5kYW5jZVN0YXRpc3RpY3NETyBhdHRlbmRhbmNlID0gbnVsbDsKICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhkaW5nVXNlcklkKSkgewogICAgICAgICAgICBhdHRlbmRhbmNlID0gYXR0ZW5kYW5jZU1hbmFnZXIuZmluZEJ5VWsoRGF0ZVV0aWwucGFyc2VUb0RhdGUoZW50cnkuZ2V0S2V5KCkpLAogICAgICAgICAgICAgICAgZGluZ1VzZXJJZCwgY29udGV4dC5nZXRXb3JrcGxhY2UoKS5nZXRDb2RlKCkpOwogICAgICAgICAgICAvLyDor6XlrZfmrrXpgJrov4dteWJhdGlz5Y+W5Ye65p2l5Li656m6LOmcgOimgeaJi+WKqOiuvue9rgogICAgICAgICAgICBpZiAobm9uTnVsbChhdHRlbmRhbmNlKSAmJiBub25OdWxsKGF0dGVuZGFuY2UuZ2V0Q3VzdG9tQXR0cmlidXRlKCkpKSB7CiAgICAgICAgICAgICAgICBhdHRlbmRhbmNlLnNldEN1c3RvbUF0dHJpYnV0ZXMoSlNPTi50b0pTT05TdHJpbmcoYXR0ZW5kYW5jZS5nZXRDdXN0b21BdHRyaWJ1dGUoKSkpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDmlK/mjIHlspfkvY3vvIzlpoLmnpzmnInnm7TmjqUv6Ze05o6l5L2c5Lia77yM5Y+W5YWo6YOo5bel5pe244CC5aaC5p6c5rKh5pyJ55u05o6l5oiW6Ze05o6l5L2c5Lia77yM5bel5pe25Li6MAogICAgICAgIGxvbmcgZWZmaWNpZW5jeUF0dGVuZGFuY2VUaW1lOwogICAgICAgIGlmIChpc1N1cHBvcnQpIHsKICAgICAgICAgICAgaWYgKGVudHJ5LmdldFZhbHVlKCkud2l0aG91dElkbGVUaW1lID4gMEwpIHsKICAgICAgICAgICAgICAgIGVmZmljaWVuY3lBdHRlbmRhbmNlVGltZSA9IGVudHJ5LmdldFZhbHVlKCkuYWxsVGltZSAvIDEwMDA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlZmZpY2llbmN5QXR0ZW5kYW5jZVRpbWUgPSAwTDsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVmZmljaWVuY3lBdHRlbmRhbmNlVGltZSA9IGVudHJ5LmdldFZhbHVlKCkuYWxsVGltZSAvIDEwMDA7CiAgICAgICAgfQoKICAgICAgICAvLyDlj6/og73msqHmnInogIPli6TmlbDmja4KICAgICAgICBpZiAoaXNOdWxsKGF0dGVuZGFuY2UpKSB7CiAgICAgICAgICAgIGF0dGVuZGFuY2UgPSBuZXdEZWZhdWx0UHByQXR0ZW5kYW5jZShjaGFuZ2VMb2csIGNvbnRleHQuZ2V0V29ya3BsYWNlKCksIGVudHJ5LmdldEtleSgpLAogICAgICAgICAgICAgICAgZWZmaWNpZW5jeUF0dGVuZGFuY2VUaW1lKTsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oInBwcuWIm+W7umF0dGVuZGFuY2U6e30iLCBKU09OLnRvSlNPTlN0cmluZyhhdHRlbmRhbmNlKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYXR0ZW5kYW5jZS5zZXRFZmZpY2llbmN5QXR0ZW5kVGltZShlZmZpY2llbmN5QXR0ZW5kYW5jZVRpbWUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5vbk51bGwoYXR0ZW5kYW5jZSkpIHsKICAgICAgICAgICAgLy8g6K+l5a2X5q616YCa6L+HbXliYXRpc+WPluWHuuadpeS4uuepuizpnIDopoHmiYvliqjorr7nva4KICAgICAgICAgICAgLy8g5aaC5p6c5piv5pSv5oyB5bKX5LiU5Ye65Yuk5bel5pe25Li6MCzmiY3orr7nva7kuLrmlK/mjIHlspfnmoTmoIfor4YKICAgICAgICAgICAgaWYgKGlzU3VwcG9ydCAmJiBhdHRlbmRhbmNlLmdldEVmZmljaWVuY3lBdHRlbmRUaW1lKCkgPT0gMEwpIHsKICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJwcHLmm7TmlrBhdHRlbmRhbmNlOnt9IiwgSlNPTi50b0pTT05TdHJpbmcoYXR0ZW5kYW5jZSkpOwogICAgICAgICAgICAgICAgYXR0ZW5kYW5jZS5zZXRJc0ZvckVmZmljaWVuY3lBdHRlbmRUaW1lKEJvb2xlYW4uRkFMU0UpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXR0ZW5kYW5jZS5zZXRJc0ZvckVmZmljaWVuY3lBdHRlbmRUaW1lKEJvb2xlYW4uVFJVRSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIGRiIOS4jeWFgeiuuHVzZXJfaWTlrZfmrrXkuLrnqboKICAgICAgICBpZiAoYXR0ZW5kYW5jZS5nZXRVc2VySWQoKSA9PSBudWxsKSB7CiAgICAgICAgICAgIGF0dGVuZGFuY2Uuc2V0VXNlcklkKCIiKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBhdHRlbmRhbmNlOwogICAgfQoKICAgIHByb3RlY3RlZCBMb25nIGdldFBwckVtcGxveWVlUG9zaXRpb24oRW1wbG95ZWVETyBjaGFuZ2VMb2csIEVtcGxveWVlQk8gZW1wbG95ZWUpIHsKICAgICAgICAvLyDmnInpmZDlj5bkurrlkZjlvZPliY3nmoTlspfkvY3vvIzlpoLmnpzkurrlkZjlt6XkvZzngrnlt7Lnu4/lkozlsaXljobkuK3nmoTlt6XkvZzngrnkuI3kuIDoh7Tml7bvvIzlj5blsaXljobph4znmoTlspfkvY0KICAgICAgICBMb25nIHBvc2l0aW9uSWQ7CiAgICAgICAgaWYgKE9iamVjdHMuZXF1YWxzKGNoYW5nZUxvZy5nZXRXb3JrUGxhY2VDb2RlKCksIGVtcGxveWVlLmdldFdvcmtQbGFjZUNvZGUoKSkpIHsKICAgICAgICAgICAgcG9zaXRpb25JZCA9IGVtcGxveWVlLmdldFBvc2l0aW9uKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcG9zaXRpb25JZCA9IGNoYW5nZUxvZy5nZXRQb3NpdGlvbigpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcG9zaXRpb25JZDsKICAgIH0KCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBpc1N1cHBvcnQoTG9uZyBwb3NpdGlvbklkKSB7CiAgICAgICAgaWYgKGlzTnVsbChwb3NpdGlvbklkKSkgewogICAgICAgICAgICByZXR1cm4gQm9vbGVhbi5GQUxTRTsKICAgICAgICB9CgogICAgICAgIFBhcmFtRE8gcGFyYW1ETyA9IHBhcmFtTWFuYWdlci5zZWxlY3RQYXJhbUJ5SWQocG9zaXRpb25JZCk7CiAgICAgICAgaWYgKGlzTnVsbChwYXJhbURPKSkgewogICAgICAgICAgICByZXR1cm4gQm9vbGVhbi5GQUxTRTsKICAgICAgICB9CiAgICAgICAgSlNPTk9iamVjdCBwb3NpdGlvbkZlYXR1cmUgPSBKU09OT2JqZWN0LnBhcnNlT2JqZWN0KHBhcmFtRE8uZ2V0RmVhdHVyZSgpKTsKICAgICAgICBpZiAobm9uTnVsbChwb3NpdGlvbkZlYXR1cmUpKSB7CiAgICAgICAgICAgIEJvb2xlYW4gaXNGb3JFZmZpY2llbmN5QXR0ZW5kVGltZSA9IHBvc2l0aW9uRmVhdHVyZS5nZXRCb29sZWFuKCJpc0ZvckVmZmljaWVuY3lBdHRlbmRUaW1lIik7CiAgICAgICAgICAgIGlmIChub25OdWxsKGlzRm9yRWZmaWNpZW5jeUF0dGVuZFRpbWUpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIWlzRm9yRWZmaWNpZW5jeUF0dGVuZFRpbWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIEJvb2xlYW4uRkFMU0U7CiAgICB9CgogICAgLyoqCiAgICAgKiDojrflj5bogIPli6Tlj5HnlJ/lvZPlpKnnmoRjaGFuZ2VMb2cKICAgICAqCiAgICAgKiBAcGFyYW0gd29ya1BsYWNlQ29kZQogICAgICogQHBhcmFtIGVtcGxveWVlTnVtYmVyCiAgICAgKiBAcGFyYW0gYXR0ZW5kYW5jZURhdGUKICAgICAqIEByZXR1cm4KICAgICAqLwogICAgcHJpdmF0ZSBFbXBsb3llZURPIGdldEF0dGVuZGFuY2VEYXlFbXBsb3llZUNoYW5nZUxvZyhTdHJpbmcgd29ya1BsYWNlQ29kZSwgTG9uZyBlbXBsb3llZU51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9jYWxEYXRlIGF0dGVuZGFuY2VEYXRlKSB7CiAgICAgICAgTGlzdDxFbXBsb3llZUNoYW5nZUxvZ0RPPiBlbXBsb3llZUNoYW5nZUxvZ0RPUyA9IGVtcGxveWVlQ2hhbmdlTG9nTWFuYWdlci5zZWxlY3RCeUVtcGxveWVlTnVtYmVyKAogICAgICAgICAgICB3b3JrUGxhY2VDb2RlLCBTdHJpbmcudmFsdWVPZihlbXBsb3llZU51bWJlciksIGF0dGVuZGFuY2VEYXRlLCBhdHRlbmRhbmNlRGF0ZSk7CgogICAgICAgIE9wdGlvbmFsPEVtcGxveWVlQ2hhbmdlTG9nRE8+IGxvZ09wdGlvbiA9IGVtcGxveWVlQ2hhbmdlTG9nRE9TLnN0cmVhbSgpCiAgICAgICAgICAgIC5maWx0ZXIobyAtPiBTdHJpbmdVdGlscy5pc05vdEJsYW5rKG8uZ2V0RGluZ1VzZXJJZCgpKSkKICAgICAgICAgICAgLnNvcnRlZCgobzEsIG8yKSAtPiB7CiAgICAgICAgICAgICAgICBpZiAobzEuZ2V0U3RhcnREYXRlKCkuaXNCZWZvcmUobzIuZ2V0U3RhcnREYXRlKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG8xLmdldFN0YXJ0RGF0ZSgpLmlzQWZ0ZXIobzIuZ2V0U3RhcnREYXRlKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmZpbmRGaXJzdCgpOwoKICAgICAgICBpZiAoIWxvZ09wdGlvbi5pc1ByZXNlbnQoKSkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIEVtcGxveWVlQ2hhbmdlTG9nRE8gbG9nRE8gPSBsb2dPcHRpb24uZ2V0KCk7CiAgICAgICAgcmV0dXJuIGxvZ0RPOwogICAgfQoKICAgIHByaXZhdGUgRGluZ1RhbGtBdHRlbmRhbmNlU3RhdGlzdGljc0RPIG5ld0RlZmF1bHRQcHJBdHRlbmRhbmNlKEVtcGxveWVlRE8gY2hhbmdlTG9nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV29ya1BsYWNlRE8gd29ya1BsYWNlRE8sIExvY2FsRGF0ZSBhdHRlbmRhbmNlRGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvbmcgYXR0ZW5kYW5jZVRpbWUpIHsKICAgICAgICBEaW5nVGFsa0F0dGVuZGFuY2VTdGF0aXN0aWNzRE8gYXR0ZW5kYW5jZVN0YXRpc3RpY3NETyA9IG5ldyBEaW5nVGFsa0F0dGVuZGFuY2VTdGF0aXN0aWNzRE8oKTsKICAgICAgICBhdHRlbmRhbmNlU3RhdGlzdGljc0RPLnNldEVmZmljaWVuY3lBdHRlbmRUaW1lKGF0dGVuZGFuY2VUaW1lKTsKCiAgICAgICAgTWFwPExvbmcsIFN0cmluZz4gaWQyTmFtZVBhcmFtTWFwID0gcGFyYW1TZXJ2aWNlLmdldElEMk5hbWVQYXJhbU1hcCgpOwoKICAgICAgICBhdHRlbmRhbmNlU3RhdGlzdGljc0RPLnNldFdvcmtOYXR1cmVOYW1lKGlkMk5hbWVQYXJhbU1hcC5nZXQoY2hhbmdlTG9nLmdldFdvcmtOYXR1cmUoKSkpOwogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0V29ya05hdHVyZShjaGFuZ2VMb2cuZ2V0V29ya05hdHVyZSgpKTsKICAgICAgICBhdHRlbmRhbmNlU3RhdGlzdGljc0RPLnNldENwQ29kZSh3b3JrUGxhY2VETy5nZXRDcENvZGUoKSk7CiAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRXb3JrR3JvdXBDb2RlKGNoYW5nZUxvZy5nZXRXb3JrR3JvdXBDb2RlKCkpOwoKICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhjaGFuZ2VMb2cuZ2V0V29ya0dyb3VwQ29kZSgpKSkgewogICAgICAgICAgICBFbXBsb3llZVdvcmtHcm91cERPIHdvcmtHcm91cCA9IGVtcGxveWVlV29ya0dyb3VwTWFuYWdlci5maW5kV29ya0dyb3VwQnlDb2RlV2l0aENhY2hlKAogICAgICAgICAgICAgICAgY2hhbmdlTG9nLmdldFdvcmtHcm91cENvZGUoKSk7CgogICAgICAgICAgICBpZiAobm9uTnVsbCh3b3JrR3JvdXApKSB7CiAgICAgICAgICAgICAgICBhdHRlbmRhbmNlU3RhdGlzdGljc0RPLnNldFdvcmtHcm91cE5hbWUod29ya0dyb3VwLmdldE5hbWUoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0RW1wbG95ZWVMb2dJZChjaGFuZ2VMb2cuZ2V0SWQoKSk7CiAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRFbXBsb3llZU5hbWUoY2hhbmdlTG9nLmdldE5hbWUoKSk7CiAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRFbXBsb3llZU51bWJlcihjaGFuZ2VMb2cuZ2V0TnVtYmVyKCkpOwogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0V29ya1BsYWNlTmFtZSh3b3JrUGxhY2VETy5nZXROYW1lKCkpOwogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0V29ya1BsYWNlQ29kZSh3b3JrUGxhY2VETy5nZXRDb2RlKCkpOwogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0VXNlcklkKGNoYW5nZUxvZy5nZXREaW5nVXNlcklkKCkgPT0gbnVsbCA/ICIiIDogY2hhbmdlTG9nLmdldERpbmdVc2VySWQoKSk7CiAgICAgICAgaWYgKE9iamVjdHMuZXF1YWxzKGNoYW5nZUxvZy5nZXRXb3JrUGxhY2VDb2RlKCksIHdvcmtQbGFjZURPLmdldENvZGUoKSkpIHsKICAgICAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRTb3VyY2VUeXBlKERpbmdUYWxrQXR0ZW5kYW5jZVNvdXJjZVR5cGUuUFBSLm5hbWUoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRTb3VyY2VUeXBlKERpbmdUYWxrQXR0ZW5kYW5jZVNvdXJjZVR5cGUuQUNST1NTX1dBUkVIT1VTRS5uYW1lKCkpOwogICAgICAgIH0KICAgICAgICBhdHRlbmRhbmNlU3RhdGlzdGljc0RPLnNldEluZHVzdHJ5Q29sbGVjdGlvbih3b3JrUGxhY2VETy5nZXRJbmR1c3RyeUNvbGxlY3Rpb24oKSk7CiAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRMZWF2ZVRpbWUoMEwpOwogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0UmVzdFRpbWUoMEwpOwogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0UmVnaW9uTmFtZShSZWdpb25FbnVtLmdldEVudW1CeVZhbHVlKHdvcmtQbGFjZURPLmdldFJlZ2lvbklkKCkpLmdldERlc2MoKSk7CiAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRTdGF0dXMoY2hhbmdlTG9nLmdldFN0YXR1cygpKTsKICAgICAgICBhdHRlbmRhbmNlU3RhdGlzdGljc0RPLnNldEF0dGVuZGFuY2VEYXRlKERhdGVVdGlsLnBhcnNlVG9EYXRlKGF0dGVuZGFuY2VEYXRlKSk7CiAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRCdXNpbmVzc1R5cGUod29ya1BsYWNlRE8uZ2V0QnVzaW5lc3NUeXBlKCkuZ2V0S2V5KCkpOwogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0U3RhdHVzTmFtZShpZDJOYW1lUGFyYW1NYXAuZ2V0KGNoYW5nZUxvZy5nZXRTdGF0dXMoKSkpOwogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0TGFib3VyQ29tcGFueUlkKGNoYW5nZUxvZy5nZXRMYWJvdXJDb21wYW55SWQoKSk7CiAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRJbmR1c3RyeUNvbGxlY3Rpb24od29ya1BsYWNlRE8uZ2V0SW5kdXN0cnlDb2xsZWN0aW9uKCkpOwogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0SW5kdXN0cnlDb2xsZWN0aW9uTmFtZSgKICAgICAgICAgICAgSW5kdXN0cnlDb2xsZWN0aW9uLmdldEluZHVzdHJ5Q29sbGVjdGlvbih3b3JrUGxhY2VETy5nZXRJbmR1c3RyeUNvbGxlY3Rpb24oKSkuZ2V0RGVzYygpKTsKICAgICAgICBhdHRlbmRhbmNlU3RhdGlzdGljc0RPLnNldElzRm9yRWZmaWNpZW5jeUF0dGVuZFRpbWUoQm9vbGVhbi5UUlVFKTsKICAgICAgICBhdHRlbmRhbmNlU3RhdGlzdGljc0RPLnNldFBvc2l0aW9uKGNoYW5nZUxvZy5nZXRQb3NpdGlvbigpKTsKICAgICAgICBhdHRlbmRhbmNlU3RhdGlzdGljc0RPLnNldFBvc2l0aW9ucyhjaGFuZ2VMb2cuZ2V0UG9zaXRpb25zKCkpOwogICAgICAgIGF0dGVuZGFuY2VTdGF0aXN0aWNzRE8uc2V0UmVnaW9uSWQod29ya1BsYWNlRE8uZ2V0UmVnaW9uSWQoKSk7CiAgICAgICAgUmVnaW9uRW51bSByZWdpb24gPSBSZWdpb25FbnVtLmdldEVudW1CeVZhbHVlKHdvcmtQbGFjZURPLmdldFJlZ2lvbklkKCkpOwogICAgICAgIGlmIChub25OdWxsKHJlZ2lvbikpIHsKICAgICAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRSZWdpb25OYW1lKHJlZ2lvbi5nZXREZXNjKCkpOwogICAgICAgIH0KCiAgICAgICAgTGFib3VyQ29tcGFueURPIGxjID0gbGFib3VyQ29tcGFueU1hbmFnZXIuZ2V0QnlJZChjaGFuZ2VMb2cuZ2V0TGFib3VyQ29tcGFueUlkKCkpOwoKICAgICAgICBpZiAobm9uTnVsbChsYykpIHsKICAgICAgICAgICAgYXR0ZW5kYW5jZVN0YXRpc3RpY3NETy5zZXRMYWJvdXJDb21wYW55Q29kZShsYy5nZXRDb2RlKCkpOwogICAgICAgICAgICBhdHRlbmRhbmNlU3RhdGlzdGljc0RPLnNldExhYm91ckNvbXBhbnlOYW1lKGxjLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhdHRlbmRhbmNlU3RhdGlzdGljc0RPOwogICAgfQoKICAgIHByb3RlY3RlZCBMaXN0PExhYm91ckVmZmljaWVuY3lEVE8+IGdldExhYm91ckVmZmljaWVuY2llc0Zyb21IYmFzZShTdHJpbmcgcm93S2V5KSB7CiAgICAgICAgbG9nZ2VyLmluZm8oImdldExhYm91ckVmZmljaWVuY2llcywgcm93S2V5OiB7fSIsIHJvd0tleSk7CiAgICAgICAgTG9jYWxEYXRlVGltZSBzdGFydFRpbWUgPSBMb2NhbERhdGVUaW1lLm5vdygpOwogICAgICAgIExpc3Q8TGFib3VyRWZmaWNpZW5jeURUTz4gZGF0YSA9IGhCYXNlU2VydmljZS5nZXRMYWJvdXJFZmZpY2llbmNpZXMoIndtcF9kYXRhX3NlcnZpY2VfbG1zX3Bwcl9kYXRhIiwgcm93S2V5KTsKICAgICAgICBsb2dnZXIuaW5mbygiZ2V0TGFib3VyRWZmaWNpZW5jaWVzLCByb3dLZXk6IHt9LCByZXN1bHQ6IHt9LCB0aW1lIHVzZWQ6IHt9IiwKICAgICAgICAgICAgcm93S2V5LCBkYXRhLnNpemUoKSwgRHVyYXRpb24uYmV0d2VlbihzdGFydFRpbWUsIExvY2FsRGF0ZVRpbWUubm93KCkpLnRvTWlsbGlzKCkKICAgICAgICApOwogICAgICAgIHJldHVybiBkYXRhOwogICAgfQoKICAgIHByb3RlY3RlZCBMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8gaW5pdFBwckJPKExvY2FsRGF0ZSBkYXRlLCBMb2NhbERhdGVUaW1lIG9wZXJhdGVUaW1lLCBMYWJvdXJFZmZpY2llbmN5RFRPIGV2ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zaXRpb25DYXRlZ29yeUJPIGVtcGxveWVlUG9zaXRpb24sIEVtcGxveWVlQk8gZW1wbG95ZWUpIHsKICAgICAgICBTdHJpbmcgb3BlcmF0ZU1vbnRoID0gTG9jYWxEYXRlVXRpbC5EQVRFX01PTlRIX0ZPUk1BVFRFUi5mb3JtYXQoZGF0ZSk7CiAgICAgICAgb3BlcmF0ZVRpbWUgPSBvcGVyYXRlVGltZS53aXRoTWludXRlKDApLndpdGhTZWNvbmQoMCk7CgogICAgICAgIExtc0xhYm91ckVmZmljaWVuY3lQcHJCTyBwcHJCTyA9IG5ldyBMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8oKTsKICAgICAgICBwcHJCTy5zZXRXYXJlaG91c2VJZChMb25nLnZhbHVlT2YoZXZlbnQuZ2V0V2FyZWhvdXNlSWQoKSkpOwogICAgICAgIHBwckJPLnNldFdvcmtwbGFjZUNvZGUoZXZlbnQuZ2V0V29ya3BsYWNlQ29kZSgpKTsKICAgICAgICBwcHJCTy5zZXRXb3JrcGxhY2VOYW1lKGV2ZW50LmdldFdvcmtwbGFjZU5hbWUoKSk7CiAgICAgICAgcHByQk8uc2V0T3BlcmF0ZU1vbnRoKG9wZXJhdGVNb250aCk7CiAgICAgICAgcHByQk8uc2V0T3BlcmF0ZURheShkYXRlKTsKICAgICAgICBwcHJCTy5zZXRJbmR1c3RyeUNvZGUoZXZlbnQuZ2V0SW5kdXN0cnlDb2RlKCkpOwogICAgICAgIHBwckJPLnNldE9wZXJhdGVUaW1lKG9wZXJhdGVUaW1lKTsKICAgICAgICBwcHJCTy5zZXRFbXBsb3llZU51bWJlcihlbXBsb3llZS5nZXROdW1iZXIoKSk7CiAgICAgICAgcHByQk8uc2V0RW1wbG95ZWVOYW1lKGVtcGxveWVlLmdldE5hbWUoKSk7CiAgICAgICAgcHByQk8uc2V0V29ya0dyb3VwQ29kZShlbXBsb3llZS5nZXRXb3JrR3JvdXBDb2RlKCkpOwogICAgICAgIHBwckJPLnNldFdvcmtOYXR1cmUoZW1wbG95ZWUuZ2V0V29ya05hdHVyZSgpKTsKICAgICAgICBwcHJCTy5zZXRFbXBsb3llZVBvc2l0aW9uKGVtcGxveWVlLmdldFBvc2l0aW9uKCkpOwogICAgICAgIHBwckJPLnNldFdvcmtHcm91cE5hbWUoZW1wbG95ZWUuZ2V0V29ya0dyb3VwTmFtZSgpKTsKICAgICAgICBwcHJCTy5zZXRXb3JrR3JvdXBMZWFkZXIoZW1wbG95ZWUuZ2V0V29ya0dyb3VwTGVhZGVyKCkpOwogICAgICAgIHBwckJPLnNldENvb3BlcmF0aW9uU3RhcnREYXRlKGVtcGxveWVlLmdldENvb3BlcmF0aW9uU3RhcnREYXRlKCkpOwogICAgICAgIGlmIChlbXBsb3llZVBvc2l0aW9uICE9IG51bGwgJiYgZW1wbG95ZWVQb3NpdGlvbi5nZXRDYXRlZ29yeSgpID09IG51bGwpIHsKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCJwcHIgcG9zaXRpb24gbm90IGZvdW5kLCBldmVudDoge30iLCBldmVudCk7CiAgICAgICAgfQogICAgICAgIHBwckJPLnNldENhdGVnb3J5KGVtcGxveWVlUG9zaXRpb24gPT0gbnVsbCA/IG51bGwgOiBlbXBsb3llZVBvc2l0aW9uLmdldENhdGVnb3J5KCkubmFtZSgpKTsKICAgICAgICBwcHJCTy5zZXRQb3NpdGlvbihlbXBsb3llZVBvc2l0aW9uID09IG51bGwgPyBudWxsIDogZW1wbG95ZWVQb3NpdGlvbi5nZXRQb3NpdGlvbigpLm5hbWUoKSk7CiAgICAgICAgcHByQk8uc2V0V29ya1R5cGUoZW1wbG95ZWVQb3NpdGlvbiA9PSBudWxsID8gbnVsbCA6IGVtcGxveWVlUG9zaXRpb24uZ2V0V29ya1R5cGUoKS5uYW1lKCkpOwogICAgICAgIHBwckJPLnNldENvbXB1dGVQcm9jZXNzKG5ldyBQcHJDb21wdXRlUHJvY2VzcygpKTsKCiAgICAgICAgcmV0dXJuIHBwckJPOwogICAgfQoKICAgIHByb3RlY3RlZCBPcHRpb25hbDxMYWJvdXJFZmZpY2llbmN5RFRPPiBmaW5kTmV4dFdvcmsoaW50IGluZGV4LCBMaXN0PExhYm91ckVmZmljaWVuY3lEVE8+IGxhYm91ckVmZmljaWVuY2llcykgewogICAgICAgIGludCBzaXplID0gbGFib3VyRWZmaWNpZW5jaWVzLnNpemUoKTsKICAgICAgICBmb3IgKGludCBpID0gaW5kZXggKyAxOyBpIDwgc2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8gbGFib3VyRWZmaWNpZW5jeSA9IGxhYm91ckVmZmljaWVuY2llcy5nZXQoaSk7CiAgICAgICAgICAgIGlmIChsYWJvdXJFZmZpY2llbmN5LmlzTG1zTGFib3VyKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBPcHRpb25hbC5vZihsYWJvdXJFZmZpY2llbmN5KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIE9wdGlvbmFsLmVtcHR5KCk7CiAgICB9CgogICAgcHJvdGVjdGVkIE9wdGlvbmFsPExhYm91ckVmZmljaWVuY3lEVE8+IGZpbmROZXh0V29ya0NvbnRhaW5SZXN0KGludCBpbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaXN0PExhYm91ckVmZmljaWVuY3lEVE8+IGxhYm91ckVmZmljaWVuY2llcykgewogICAgICAgIGludCBzaXplID0gbGFib3VyRWZmaWNpZW5jaWVzLnNpemUoKTsKICAgICAgICBmb3IgKGludCBpID0gaW5kZXggKyAxOyBpIDwgc2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8gbGFib3VyRWZmaWNpZW5jeSA9IGxhYm91ckVmZmljaWVuY2llcy5nZXQoaSk7CiAgICAgICAgICAgIGlmIChsYWJvdXJFZmZpY2llbmN5LmlzTG1zTGFib3VyQ29udGFpblJlc3QoKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIE9wdGlvbmFsLm9mKGxhYm91ckVmZmljaWVuY3kpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gT3B0aW9uYWwuZW1wdHkoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgT3B0aW9uYWw8TGFib3VyRWZmaWNpZW5jeURUTz4gZmluZFByZXZpb3VzV29yayhpbnQgaW5kZXgsIExpc3Q8TGFib3VyRWZmaWNpZW5jeURUTz4gbGFib3VyRWZmaWNpZW5jaWVzKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IGluZGV4IC0gMTsgaSA+IDA7IGktLSkgewogICAgICAgICAgICBMYWJvdXJFZmZpY2llbmN5RFRPIGxhYm91ckVmZmljaWVuY3kgPSBsYWJvdXJFZmZpY2llbmNpZXMuZ2V0KGkpOwogICAgICAgICAgICBpZiAobGFib3VyRWZmaWNpZW5jeS5pc0xtc0xhYm91cigpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gT3B0aW9uYWwub2YobGFib3VyRWZmaWNpZW5jeSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBPcHRpb25hbC5lbXB0eSgpOwogICAgfQoKICAgIHByb3RlY3RlZCBMYWJvdXJFZmZpY2llbmN5RFRPIGZpbmRJZGxlTmVhcmVzdEV2ZW50KGludCBpbmRleCwgTGlzdDxMYWJvdXJFZmZpY2llbmN5RFRPPiBsYWJvdXJFZmZpY2llbmNpZXMpIHsKICAgICAgICBMYWJvdXJFZmZpY2llbmN5RFRPIGN1cnJlbnQgPSBsYWJvdXJFZmZpY2llbmNpZXMuZ2V0KGluZGV4KTsKICAgICAgICBpZiAoY3VycmVudC5pc0xtc0xhYm91cigpKSB7CiAgICAgICAgICAgIHJldHVybiBjdXJyZW50OwogICAgICAgIH0KCiAgICAgICAgLy8g5YWI5ZCR5YmN5om+CiAgICAgICAgT3B0aW9uYWw8TGFib3VyRWZmaWNpZW5jeURUTz4gcHJldmlvdXNXb3JrID0gZmluZFByZXZpb3VzV29yayhpbmRleCwgbGFib3VyRWZmaWNpZW5jaWVzKTsKICAgICAgICBpZiAocHJldmlvdXNXb3JrLmlzUHJlc2VudCgpKSB7CiAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1dvcmsuZ2V0KCk7CiAgICAgICAgfQogICAgICAgIC8vIOWGjeWQkeWQjuaJvgogICAgICAgIE9wdGlvbmFsPExhYm91ckVmZmljaWVuY3lEVE8+IG5leHRXb3JrID0gZmluZE5leHRXb3JrKGluZGV4LCBsYWJvdXJFZmZpY2llbmNpZXMpOwogICAgICAgIGlmIChuZXh0V29yay5pc1ByZXNlbnQoKSkgewogICAgICAgICAgICByZXR1cm4gbmV4dFdvcmsuZ2V0KCk7CiAgICAgICAgfQoKICAgICAgICAvLyDliY3lkI7mib7kuI3liLAsIOi/lOWbnuW9k+WJjQogICAgICAgIHJldHVybiBjdXJyZW50OwogICAgfQoKICAgIHByb3RlY3RlZCBPcHRpb25hbDxMYWJvdXJFZmZpY2llbmN5RFRPPiBmaW5kUHJldmlvdXNEaXJlY3RXb3JrKGludCBpbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpc3Q8TGFib3VyRWZmaWNpZW5jeURUTz4gbGFib3VyRWZmaWNpZW5jaWVzKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IGluZGV4IC0gMTsgaSA+IDA7IGktLSkgewogICAgICAgICAgICBMYWJvdXJFZmZpY2llbmN5RFRPIGxhYm91ckVmZmljaWVuY3kgPSBsYWJvdXJFZmZpY2llbmNpZXMuZ2V0KGkpOwogICAgICAgICAgICBpZiAobGFib3VyRWZmaWNpZW5jeS5pc0RpcmVjdExhYm91cigpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gT3B0aW9uYWwub2YobGFib3VyRWZmaWNpZW5jeSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBPcHRpb25hbC5lbXB0eSgpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHBhZGRpbmdJbmRpcmVjdExhYm91ckVuZFRpbWUoTGlzdDxMYWJvdXJFZmZpY2llbmN5RFRPPiBzb3J0ZWRQcHJEYXRhKSB7CiAgICAgICAgZm9yIChMYWJvdXJFZmZpY2llbmN5RFRPIGxhYm91ciA6IHNvcnRlZFBwckRhdGEpIHsKICAgICAgICAgICAgLy8g5omA5pyJ6Ze05o6l5bel5L2c77yI5YyF5ZCr56a75bKX5oiW5ZCO57ut5YW25LuW57G75Z6L55qE6Ze05o6l5bel5L2c77yJ77yM6YO96ZyA6KaB5oqKMTk3MOiuvue9ruaIkOW9k+WJjeaXtumXtAogICAgICAgICAgICBpZiAobGFib3VyLmlzQWxsSW5EaXJlY3RMYWJvdXIoKSAmJiBPYmplY3RzLmVxdWFscyhMb2NhbERhdGVVdGlsLk1JTiwgbGFib3VyLmdldEVuZFRpbWUoKSkpIHsKICAgICAgICAgICAgICAgIGxhYm91ci5zZXRFbmRUaW1lKExvY2FsRGF0ZVRpbWUubm93KCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGN1dE9mZkNyb3NzVGltZShMaXN0PExhYm91ckVmZmljaWVuY3lEVE8+IHNvcnRlZFBwckRhdGEsIGJvb2xlYW4gaXNSZWFsVGltZSkgewogICAgICAgIGludCBzaXplID0gc29ydGVkUHByRGF0YS5zaXplKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKICAgICAgICAgICAgaWYgKGkgIT0gc2l6ZSAtIDEpIHsKICAgICAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8gY3VycmVudCA9IHNvcnRlZFBwckRhdGEuZ2V0KGkpOwogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuaXNMbXNMYWJvdXIoKSkgewogICAgICAgICAgICAgICAgICAgIGZpbmROZXh0V29yayhpLCBzb3J0ZWRQcHJEYXRhKS5pZlByZXNlbnQobmV4dFdvcmsgLT4gewogICAgICAgICAgICAgICAgICAgICAgICBib29sZWFuIGlzQ3Jvc3NUaW1lID0gY3VycmVudC5nZXRFbmRUaW1lKCkuaXNBZnRlcihuZXh0V29yay5nZXRTdGFydFRpbWUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Nyb3NzVGltZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVhbFRpbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbXNnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbG1zRW52Q29uZmlnLmlzRGVwbG95T3ZlcnNlYXMoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSAi5Lu75Yqh6Ze05Lqk5Y+J6KKr5oiq5patLCDkuI4lc+WtmOWcqOS6pOWPiSwg5Y6f57uT5p2f5pe26Ze0OiAlcywg6LCD5pW05ZCOOiAlcyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gIlRoZSBvdmVybGFwcGluZyBwYXJ0cyBvZiB0aGUgdHdvIHRhc2sgaXMgY3V0ICwgdGhlIG90aGVyIHRhc2sgaXMgJXMsIG9yaWdpbiAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICJlbmQgdGltZTogJXMsIGFkanVzdGVkIGVuZCB0aW1lOiAlcyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuZ2V0UHJvY2VzcygpLmFkZChTdHJpbmcuZm9ybWF0KG1zZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFdvcmsuZ2V0Q29kZSgpLCBjdXJyZW50LmdldENvbXB1dGVFbmRUaW1lKCksIG5leHRXb3JrLmdldFN0YXJ0VGltZSgpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5zZXRDb21wdXRlRW5kVGltZShuZXh0V29yay5nZXRTdGFydFRpbWUoKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuaXNJbkRpcmVjdExhYm91cigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHBySW5kaXJlY3RMYWJvdXJDdXRPZmZFdmVudCBwcHJJbmRpcmVjdExhYm91ckN1dE9mZkV2ZW50ID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHBySW5kaXJlY3RMYWJvdXJDdXRPZmZFdmVudC5idWlsZGVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC53b3JrcGxhY2VDb2RlKGN1cnJlbnQuZ2V0V29ya3BsYWNlQ29kZSgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGlyZWN0TGFib3VyQ29kZShjdXJyZW50LmdldENvZGUoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbXBsb3llZU51bWJlcihjdXJyZW50LmdldEVtcGxveWVlTnVtYmVyKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZW5kVGltZShuZXh0V29yay5nZXRTdGFydFRpbWUoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbmRTb3VyY2VDb2RlKG5leHRXb3JrLmdldENvZGUoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5idWlsZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFB1Ymxpc2hlci5wdWJsaXNoRXZlbnQocHBySW5kaXJlY3RMYWJvdXJDdXRPZmZFdmVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBjdXRPZmZPdmVydGltZShFbXBsb3llZVBwckNvbnRleHQgY29udGV4dCwgTGlzdDxMYWJvdXJFZmZpY2llbmN5RFRPPiBzb3J0ZWRQcHJEYXRhKSB7CiAgICAgICAgc29ydGVkUHByRGF0YS5zdHJlYW0oKQogICAgICAgICAgICAuZmlsdGVyKExhYm91ckVmZmljaWVuY3lEVE86OmlzRGlyZWN0TGFib3VyKQogICAgICAgICAgICAuZm9yRWFjaCh0YXNrIC0+IHsKICAgICAgICAgICAgICAgIC8vIOiOt+WPluWyl+S9jQogICAgICAgICAgICAgICAgUG9zaXRpb25DYXRlZ29yeUJPIGJvID0gZ2V0UG9zaXRpb25Gcm9tVGFzayh0YXNrKTsKICAgICAgICAgICAgICAgIE5ld1Bvc2l0aW9uRW51bSBwb3NpdGlvbiA9IGJvLmdldFBvc2l0aW9uKCk7CgogICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBNYXA8TmV3UG9zaXRpb25FbnVtLCBMb25nPiBwb3NpdGlvbjJUaW1lID0gY29udGV4dC5nZXRQYXJhbSgpLmdldFBvc2l0aW9uMlRpbWUoKTsKICAgICAgICAgICAgICAgICAgICBMb25nIG1heFRpbWVJbk1pbnV0ZSA9IHBvc2l0aW9uMlRpbWUuZ2V0KHBvc2l0aW9uKTsKICAgICAgICAgICAgICAgICAgICBpZiAobWF4VGltZUluTWludXRlID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF4VGltZUluTWludXRlID0gcG9zaXRpb24yVGltZS5nZXQoTmV3UG9zaXRpb25FbnVtLk9USEVSKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKG1heFRpbWVJbk1pbnV0ZSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmcgZHVyYXRpb25Jbk1pbnV0ZSA9IER1cmF0aW9uLmJldHdlZW4odGFzay5nZXRTdGFydFRpbWUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suZ2V0Q29tcHV0ZUVuZFRpbWUoKSkudG9NaW51dGVzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmb3JtYXRNc2cgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxtc0VudkNvbmZpZy5pc0RlcGxveU92ZXJzZWFzKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdE1zZyA9ICLmjIHnu63ml7bplb/ov4fplb/ooqvns7vnu5/miKrmlq0sIOaMgee7reaXtumVvzogJXPliIYsIOacgOmVv+aXtumVvzogJXPliIYsIOWOn+e7k+adn+aXtumXtDogJXMsIOiwg+aVtOWQjjogJXMiOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0TXNnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAiVGhlIG9yaWdpbmFsIHRhc2sgYmF0Y2ggZW5kIHRpbWUgaXMgJXMgYW5kIHRoZSBvcmlnaW4gdGFzayBiYXRjaCBkdXJhdGlvbiBpcyAlcyAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAibWludXRlcy4gVGhlIHRhc2sgYmF0Y2ggd29ya2luZyBob3VycyBhcmUgdG9vIGxvbmcgYW5kIGlzIGNhcHBlZCBhdCBtYXggJXMgbWludXRlcyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIuIFRoZSBUQiBlbmQgdGltZSBpcyBhZGp1c3RlZCBieSB3b3JrZXIgZW5kIHRpbWUgJXMiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkdXJhdGlvbkluTWludXRlID4gbWF4VGltZUluTWludXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2NhbERhdGVUaW1lIGVuZFRpbWUgPSB0YXNrLmdldFN0YXJ0VGltZSgpLnBsdXNNaW51dGVzKG1heFRpbWVJbk1pbnV0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbXNnID0gU3RyaW5nLmZvcm1hdChmb3JtYXRNc2csIGVuZFRpbWUsIGR1cmF0aW9uSW5NaW51dGUsIG1heFRpbWVJbk1pbnV0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLmdldENvbXB1dGVFbmRUaW1lKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsbXNFbnZDb25maWcuaXNEZXBsb3lPdmVyc2VhcygpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Z2e5rW35aSW5Y+v6IO96ZyA6KaB55u05o6l5bel5L2c6KKr6ICD5Yuk5oiq5patLCDmtbflpJbmmI7noa7pnIDmsYLnm7TmjqXlt6XkvZzopoHooqvkv53nlZks5omA5Lul5LiN6LCD5pW0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGFib3VyRWZmaWNpZW5jeURUTyBhdHRlbmRhbmNlID0gY29udGV4dC5nZXRBdHRlbmRhbmNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbGVhbiBpc0F0dGVuZGFuY2VFeGlzdCA9IGF0dGVuZGFuY2UgIT0gbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBhdHRlbmRhbmNlLmdldFN0YXJ0VGltZSgpICE9IG51bGwgJiYgYXR0ZW5kYW5jZS5nZXRFbmRUaW1lKCkgIT0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBdHRlbmRhbmNlRXhpc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbGVhbiBpc1Rhc2tDcm9zc0F0dGVuZGFuY2VFbmQgPSB0YXNrLmdldFN0YXJ0VGltZSgpLmlzQmVmb3JlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW5kYW5jZS5nZXRFbmRUaW1lKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiB0YXNrLmdldENvbXB1dGVFbmRUaW1lKCkuaXNBZnRlcihhdHRlbmRhbmNlLmdldEVuZFRpbWUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1Rhc2tDcm9zc0F0dGVuZGFuY2VFbmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpbWUgPSBhdHRlbmRhbmNlLmdldEVuZFRpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbG1zRW52Q29uZmlnLmlzRGVwbG95T3ZlcnNlYXMoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdE1zZyA9ICLmjIHnu63ml7bplb/ov4fplb/ooqvkuIvnj63ljaHmiKrmlq0sIOaMgee7reaXtumVvzogJXPliIYsIOacgOmVv+aXtumVvzogJXPliIYsIOWOn+e7k+adn+aXtumXtDogJXMsIOiwg+aVtOWQjjogJXMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRNc2cgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGhlIGxlbmd0aCBvZiB0aGUgZHVyYXRpb24gb2YgdGhlIHRhc2sgaXMgdG9vIGxvbmcgLCB3aGljaCBpcyBjdXQgYnkgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAiZW5kIHdvcmssIGFkanVzdGVkIGR1cmF0aW9uIGlzICVzIG1pbnV0ZXMsdGhlIG9yaWdpbiBkdXJhdGlvbiAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICJpcyAlcyAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICJtaW51dGVzLCBvcmlnaW4gZW5kIHRpbWUgaXMgJXMsYWRqdXN0ZWQgZW5kIHRpbWUgaXMgJXMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gU3RyaW5nLmZvcm1hdChmb3JtYXRNc2csIG1heFRpbWVJbk1pbnV0ZSwgZHVyYXRpb25Jbk1pbnV0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLmdldENvbXB1dGVFbmRUaW1lKCksIGVuZFRpbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suc2V0Q29tcHV0ZUVuZFRpbWUoZW5kVGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5pc1JlYWxUaW1lKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLmdldFByb2Nlc3MoKS5hZGQobXNnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgYWRkUmVhc29uYWJsZU9mZlRpbWUoRW1wbG95ZWVQcHJDb250ZXh0IGNvbnRleHQsIExpc3Q8TGFib3VyRWZmaWNpZW5jeURUTz4gc29ydGVkUHByRGF0YSkgewogICAgICAgIGludCBzaXplID0gc29ydGVkUHByRGF0YS5zaXplKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKICAgICAgICAgICAgaWYgKGkgIT0gc2l6ZSAtIDEpIHsKICAgICAgICAgICAgICAgIExhYm91ckVmZmljaWVuY3lEVE8gY3VycmVudCA9IHNvcnRlZFBwckRhdGEuZ2V0KGkpOwogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuaXNMbXNMYWJvdXIoKSkgewogICAgICAgICAgICAgICAgICAgIGZpbmROZXh0V29ya0NvbnRhaW5SZXN0KGksIHNvcnRlZFBwckRhdGEpLmlmUHJlc2VudChuZXh0V29yayAtPiB7CiAgICAgICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uQ2F0ZWdvcnlCTyBwb3NpdGlvbiA9IHRoaXMuZ2V0UG9zaXRpb25Gcm9tVGFzayhjdXJyZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgTWFwPE5ld1Bvc2l0aW9uRW51bSwgTG9uZz4gcG9zaXRpb25JZGxlMlRpbWUgPSBjb250ZXh0LmdldFBhcmFtKCkuZ2V0UG9zaXRpb25JZGxlMlRpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgTG9uZyBtYXhJZGxlVGltZSA9IHBvc2l0aW9uSWRsZTJUaW1lLmdldChwb3NpdGlvbi5nZXRQb3NpdGlvbigpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heElkbGVUaW1lID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heElkbGVUaW1lID0gcG9zaXRpb25JZGxlMlRpbWUuZ2V0KE5ld1Bvc2l0aW9uRW51bS5PVEhFUik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXhJZGxlVGltZSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2NhbERhdGVUaW1lIG5leHRTdGFydFRpbWUgPSBuZXh0V29yay5nZXRTdGFydFRpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIER1cmF0aW9uIGludGVydmFsID0gRHVyYXRpb24uYmV0d2VlbihjdXJyZW50LmdldENvbXB1dGVFbmRUaW1lKCksIG5leHRTdGFydFRpbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIGludGVydmFsTWludXRlID0gaW50ZXJ2YWwudG9NaWxsaXMoKSAvIE9ORV9NSU5VVEVfSU5fTUlMTElfU0VDT05EUzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWxNaW51dGUgPiAwICYmIGludGVydmFsTWludXRlIDw9IG1heElkbGVUaW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5q2j5bi46Ze06ZqZ5bel5pe2LCDnrpflnKjkuIrkuIDkuKpUQuW3peS9nOaXtumVv+S4rQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LmlzUmVhbFRpbWUoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgZm9ybWF0TXNnID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsbXNFbnZDb25maWcuaXNEZXBsb3lPdmVyc2VhcygpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRNc2cgPSAi5Lu75YqhOiAlcyDpl7TmraPluLjpl7TpmpnosIPmlbQsIOWOn+e7k+adn+aXtumXtDogJXMsIOiwg+aVtOWQjjogJXMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0TXNnID0gIlRoZSBkdXJhdGlvbiBiZXR3ZWVuIHR3byB0YXNrIGlzIHJlYXNvbmFibGU6ICVzLCAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAib3JpZ2luIGVuZCB0aW1lIGlzICVzLGFkanVzdGVkIGVuZCB0aW1lIGlzICVzIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmdldFByb2Nlc3MoKS5hZGQoU3RyaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9ybWF0KGZvcm1hdE1zZywgY3VycmVudC5nZXRDb2RlKCksIGN1cnJlbnQuZ2V0Q29tcHV0ZUVuZFRpbWUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0V29yay5nZXRTdGFydFRpbWUoKSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LnNldENvbXB1dGVFbmRUaW1lKG5leHRXb3JrLmdldFN0YXJ0VGltZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGNvbXB1dGVXb3JrbG9hZChFbXBsb3llZVBwckNvbnRleHQgY29udGV4dCwgTGFib3VyRWZmaWNpZW5jeURUTyBjdXJyZW50RXZlbnQpIHsKICAgICAgICBMb2NhbERhdGVUaW1lIHRhc2tFbmRUaW1lID0gY3VycmVudEV2ZW50LmdldENvbXB1dGVFbmRUaW1lKCk7CiAgICAgICAgTG9uZyBhY3R1YWxOdW0gPSBjdXJyZW50RXZlbnQuZ2V0Q29tcHV0ZUFjdHVhbE51bSgpOwogICAgICAgIFN0cmluZyBpbmR1c3RyeUNvZGUgPSBjdXJyZW50RXZlbnQuZ2V0SW5kdXN0cnlDb2RlKCk7CiAgICAgICAgTG9uZyBlbXBsb3llZU51bWJlciA9IGNvbnRleHQuZ2V0RW1wbG95ZWUoKS5nZXROdW1iZXIoKTsKICAgICAgICBNYXA8U3RyaW5nLCBMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8+IHVzZXIyUHByID0gY29udGV4dC5nZXRQYXJhbSgpLmdldFVzZXIyUHByKCk7CiAgICAgICAgU3RyaW5nIHdhcmVob3VzZUlkID0gY3VycmVudEV2ZW50LmdldFdhcmVob3VzZUlkKCk7CgogICAgICAgIC8vIOeul+WcqOe7k+adn+eahOWwj+aXtuWGhQogICAgICAgIFN0cmluZyB0YXNrRW5kID0gTG9jYWxEYXRlVXRpbC5mb3JtYXQodGFza0VuZFRpbWUsICJ5eXl5LU1NLWRkIEhIOjAwOjAwIik7CgogICAgICAgIGlmIChhY3R1YWxOdW0gIT0gbnVsbCAmJiBhY3R1YWxOdW0gIT0gMCkgewogICAgICAgICAgICBQb3NpdGlvbkNhdGVnb3J5Qk8gcG9zaXRpb24gPSBnZXRQb3NpdGlvbkZyb21UYXNrKGN1cnJlbnRFdmVudCk7CiAgICAgICAgICAgIGlmIChwb3NpdGlvbi5nZXRXb3JrVHlwZSgpID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBTdHJpbmcgcHByS2V5ID0gd2FyZWhvdXNlSWQgKyBpbmR1c3RyeUNvZGUgKyBlbXBsb3llZU51bWJlciArIHBvc2l0aW9uLmdldFdvcmtUeXBlKCkgKyB0YXNrRW5kOwogICAgICAgICAgICBMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8gcHByQk8gPSB1c2VyMlBwci5nZXQocHByS2V5KTsKICAgICAgICAgICAgaWYgKHBwckJPID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHBwckJPID0gaW5pdFBwckJPKGNvbnRleHQuZ2V0RGF0ZSgpLCB0YXNrRW5kVGltZSwgY3VycmVudEV2ZW50LCBwb3NpdGlvbiwgY29udGV4dC5nZXRFbXBsb3llZSgpKTsKICAgICAgICAgICAgICAgIHVzZXIyUHByLnB1dChwcHJLZXksIHBwckJPKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHByQk8uYWRkSXRlbU51bShhY3R1YWxOdW0pOwogICAgICAgICAgICBwcHJCTy5hZGRQYWNrYWdlTnVtKGN1cnJlbnRFdmVudC5nZXRQYWNrYWdlTnVtKCkpOwogICAgICAgICAgICBwcHJCTy5hZGRPcmRlck51bShjdXJyZW50RXZlbnQuZ2V0T3JkZXJOdW0oKSk7CiAgICAgICAgICAgIHBwckJPLmFkZFNrdU51bShjdXJyZW50RXZlbnQuZ2V0U2t1TnVtKCkpOwogICAgICAgICAgICAvLyDlsIbku7vliqHorqHnrpfnmoTkvZPnp6/lkozph43ph4/vvIzmt7vliqDliLBwcm9kdWN0aW9uV2VpZ2h0LHByb2R1Y3Rpb25Wb2x1bWUKICAgICAgICAgICAgaWYgKG5vbk51bGwoY3VycmVudEV2ZW50LmdldFRvdGFsT3BlcmF0ZVdlaWdodCgpKSkgewogICAgICAgICAgICAgICAgcHByQk8uYWRkUHJvZHVjdGlvbldlaWdodChEb3VibGUudmFsdWVPZihjdXJyZW50RXZlbnQuZ2V0VG90YWxPcGVyYXRlV2VpZ2h0KCkpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobm9uTnVsbChjdXJyZW50RXZlbnQuZ2V0VG90YWxPcGVyYXRlVm9sdW1lKCkpKSB7CiAgICAgICAgICAgICAgICBwcHJCTy5hZGRQcm9kdWN0aW9uVm9sdW1lKGN1cnJlbnRFdmVudC5nZXRUb3RhbE9wZXJhdGVWb2x1bWUoKS5pbnRWYWx1ZSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBwcHJCTy5nZXRDb21wdXRlUHJvY2VzcygpLmdldFdvcmtRdWFudGl0eSgpLmFkZChjdXJyZW50RXZlbnQuZ2V0Q29kZSgpICsgIjoiICsgYWN0dWFsTnVtKTsKICAgICAgICB9CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgY29tcHV0ZVdvcmtUaW1lKEVtcGxveWVlUHByQ29udGV4dCBjb250ZXh0LCBMYWJvdXJFZmZpY2llbmN5RFRPIGN1cnJlbnRFdmVudCkgewogICAgICAgIGlmIChjdXJyZW50RXZlbnQuaXNEaXJlY3RMYWJvdXIoKSkgewogICAgICAgICAgICBjb21wdXRlRGlyZWN0V29ya1RpbWUoY29udGV4dCwgY3VycmVudEV2ZW50KTsKICAgICAgICAgICAgLy/pl7TmjqXlt6Xml7bvvIznprvlspfkvJHmga/pg73orqHlhaXpl7TmjqXlt6Xml7YKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoY29udGV4dC5pc1Jlc3RDb25maWcoKSkgewogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRFdmVudC5pc0luRGlyZWN0TGFib3VyKCkgfHwgY3VycmVudEV2ZW50LmlzT3V0UmVzdCgpKSB7CiAgICAgICAgICAgICAgICAgICAgY29tcHV0ZUluZGlyZWN0V29ya1RpbWUoY29udGV4dCwgY3VycmVudEV2ZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RXZlbnQuaXNJbkRpcmVjdExhYm91cigpKSB7CiAgICAgICAgICAgICAgICAgICAgY29tcHV0ZUluZGlyZWN0V29ya1RpbWUoY29udGV4dCwgY3VycmVudEV2ZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBjb21wdXRlSW5kaXJlY3RXb3JrVGltZShFbXBsb3llZVBwckNvbnRleHQgY29udGV4dCwgTGFib3VyRWZmaWNpZW5jeURUTyBjdXJyZW50RXZlbnQpIHsKICAgICAgICBMb2NhbERhdGVUaW1lIHRhc2tTdGFydFRpbWUgPSBjdXJyZW50RXZlbnQuZ2V0U3RhcnRUaW1lKCk7CiAgICAgICAgTG9jYWxEYXRlVGltZSB0YXNrRW5kVGltZSA9IGN1cnJlbnRFdmVudC5nZXRDb21wdXRlRW5kVGltZSgpOwogICAgICAgIFN0cmluZyBpbmR1c3RyeUNvZGUgPSBjdXJyZW50RXZlbnQuZ2V0SW5kdXN0cnlDb2RlKCk7CiAgICAgICAgU3RyaW5nIHBvc2l0aW9uQ29kZSA9IGN1cnJlbnRFdmVudC5nZXRQb3NpdGlvbkNvZGUoKTsKICAgICAgICBMb25nIGVtcGxveWVlTnVtYmVyID0gY29udGV4dC5nZXRFbXBsb3llZSgpLmdldE51bWJlcigpOwogICAgICAgIE1hcDxTdHJpbmcsIExtc0xhYm91ckVmZmljaWVuY3lQcHJCTz4gdXNlcjJQcHIgPSBjb250ZXh0LmdldFBhcmFtKCkuZ2V0VXNlcjJQcHIoKTsKICAgICAgICBsb25nIHdhcmVob3VzZUlkID0gTG9uZy5wYXJzZUxvbmcoY3VycmVudEV2ZW50LmdldFdhcmVob3VzZUlkKCkpOwoKICAgICAgICBmb3IgKExvY2FsRGF0ZVRpbWUgdGFza1RpbWUgPSB0YXNrU3RhcnRUaW1lOyB0YXNrVGltZS5pc0JlZm9yZSh0YXNrRW5kVGltZSk7CiAgICAgICAgICAgICB0YXNrVGltZSA9IHRhc2tUaW1lLnBsdXNIb3VycygxKS50cnVuY2F0ZWRUbyhIT1VSUykpIHsKCiAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgaG91clRpbWUgPSB0YXNrVGltZS5wbHVzSG91cnMoMSkudHJ1bmNhdGVkVG8oSE9VUlMpOwogICAgICAgICAgICBpZiAoaG91clRpbWUuaXNBZnRlcih0YXNrRW5kVGltZSkpIHsKICAgICAgICAgICAgICAgIGhvdXJUaW1lID0gdGFza0VuZFRpbWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFN0cmluZyBvcGVyYXRlVGltZSA9IExvY2FsRGF0ZVV0aWwuZm9ybWF0KHRhc2tUaW1lLCAieXl5eS1NTS1kZCBISDowMDowMCIpOwoKICAgICAgICAgICAgU3RyaW5nIHBwcktleSA9IHdhcmVob3VzZUlkICsgaW5kdXN0cnlDb2RlICsgZW1wbG95ZWVOdW1iZXIgKyBwb3NpdGlvbkNvZGUgKyBvcGVyYXRlVGltZTsKICAgICAgICAgICAgTG1zTGFib3VyRWZmaWNpZW5jeVBwckJPIHBwckJPID0gdXNlcjJQcHIuZ2V0KHBwcktleSk7CgogICAgICAgICAgICBpZiAocHByQk8gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcHByQk8gPSBpbml0UHByQk8oY29udGV4dC5nZXREYXRlKCksIHRhc2tUaW1lLCBjdXJyZW50RXZlbnQsIG51bGwsIGNvbnRleHQuZ2V0RW1wbG95ZWUoKSk7CiAgICAgICAgICAgICAgICBwcHJCTy5zZXRDYXRlZ29yeShQcHJVdGlscy5nZXRDYXRlZ29yeUZyb21JbmRpcmVjdChjdXJyZW50RXZlbnQuZ2V0UG9zaXRpb25Db2RlKCkpLm5hbWUoKSk7CiAgICAgICAgICAgICAgICBwcHJCTy5zZXRQb3NpdGlvbihwb3NpdGlvbkNvZGUpOwogICAgICAgICAgICAgICAgcHByQk8uc2V0V29ya1R5cGUocG9zaXRpb25Db2RlKTsKICAgICAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKHBvc2l0aW9uQ29kZSkpIHsKICAgICAgICAgICAgICAgICAgICBwcHJCTy5zZXRQb3NpdGlvbihwb3NpdGlvbkNvZGUuc3BsaXQoRGVsaW1pdGVyQ29uc3RhbnRzLlVOREVSTElORV9ERUxJTUlURVIpWzBdKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB1c2VyMlBwci5wdXQocHByS2V5LCBwcHJCTyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxvbmcgbWlsbGlzID0gRHVyYXRpb24uYmV0d2Vlbih0YXNrVGltZSwgaG91clRpbWUpLnRvTWlsbGlzKCk7CiAgICAgICAgICAgIHBwckJPLmFkZEluZGlyZWN0VGltZShtaWxsaXMpOwogICAgICAgICAgICBpZiAoY29udGV4dC5pc1JlYWxUaW1lKCkpIHsKICAgICAgICAgICAgICAgIHBwckJPLmdldENvbXB1dGVQcm9jZXNzKCkuZ2V0SW5kaXJlY3RUaW1lKCkuYWRkKAogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFdmVudC5nZXRDb2RlKCkgKyAiOiIgKyBjdXJyZW50RXZlbnQuZ2V0UHJvY2VzcygpICsgIjoiICsgbWlsbGlzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBjb21wdXRlRGlyZWN0V29ya1RpbWUoRW1wbG95ZWVQcHJDb250ZXh0IGNvbnRleHQsIExhYm91ckVmZmljaWVuY3lEVE8gY3VycmVudEV2ZW50KSB7CiAgICAgICAgTG9jYWxEYXRlVGltZSB0YXNrU3RhcnRUaW1lID0gY3VycmVudEV2ZW50LmdldFN0YXJ0VGltZSgpOwogICAgICAgIExvY2FsRGF0ZVRpbWUgdGFza0VuZFRpbWUgPSBjdXJyZW50RXZlbnQuZ2V0Q29tcHV0ZUVuZFRpbWUoKTsKICAgICAgICBTdHJpbmcgaW5kdXN0cnlDb2RlID0gY3VycmVudEV2ZW50LmdldEluZHVzdHJ5Q29kZSgpOwogICAgICAgIExvbmcgZW1wbG95ZWVOdW1iZXIgPSBjb250ZXh0LmdldEVtcGxveWVlKCkuZ2V0TnVtYmVyKCk7CiAgICAgICAgUG9zaXRpb25DYXRlZ29yeUJPIHBvc2l0aW9uID0gZ2V0UG9zaXRpb25Gcm9tVGFzayhjdXJyZW50RXZlbnQpOwoKICAgICAgICBNYXA8U3RyaW5nLCBMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8+IHVzZXIyUHByID0gY29udGV4dC5nZXRQYXJhbSgpLmdldFVzZXIyUHByKCk7CiAgICAgICAgbG9uZyB3YXJlaG91c2VJZCA9IExvbmcucGFyc2VMb25nKGN1cnJlbnRFdmVudC5nZXRXYXJlaG91c2VJZCgpKTsKCiAgICAgICAgLy8g6Leo5bCP5pe25Z2H5pGKCiAgICAgICAgZm9yIChMb2NhbERhdGVUaW1lIHRhc2tUaW1lID0gdGFza1N0YXJ0VGltZTsgdGFza1RpbWUuaXNCZWZvcmUodGFza0VuZFRpbWUpOwogICAgICAgICAgICAgdGFza1RpbWUgPSB0YXNrVGltZS5wbHVzSG91cnMoMSkudHJ1bmNhdGVkVG8oSE9VUlMpKSB7CgogICAgICAgICAgICBMb2NhbERhdGVUaW1lIGhvdXJUaW1lID0gdGFza1RpbWUucGx1c0hvdXJzKDEpLnRydW5jYXRlZFRvKEhPVVJTKTsKICAgICAgICAgICAgaWYgKGhvdXJUaW1lLmlzQWZ0ZXIodGFza0VuZFRpbWUpKSB7CiAgICAgICAgICAgICAgICBob3VyVGltZSA9IHRhc2tFbmRUaW1lOwogICAgICAgICAgICB9CgogICAgICAgICAgICBTdHJpbmcgb3BlcmF0ZVRpbWUgPSBMb2NhbERhdGVVdGlsLmZvcm1hdCh0YXNrVGltZSwgInl5eXktTU0tZGQgSEg6MDA6MDAiKTsKCiAgICAgICAgICAgIFN0cmluZyBwcHJLZXkgPSB3YXJlaG91c2VJZCArIGluZHVzdHJ5Q29kZSArIGVtcGxveWVlTnVtYmVyICsgcG9zaXRpb24uZ2V0V29ya1R5cGUoKSArIG9wZXJhdGVUaW1lOwogICAgICAgICAgICBMbXNMYWJvdXJFZmZpY2llbmN5UHByQk8gcHByQk8gPSB1c2VyMlBwci5nZXQocHByS2V5KTsKCiAgICAgICAgICAgIGlmIChwcHJCTyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBwcHJCTyA9IGluaXRQcHJCTyhjb250ZXh0LmdldERhdGUoKSwgdGFza1RpbWUsIGN1cnJlbnRFdmVudCwgcG9zaXRpb24sIGNvbnRleHQuZ2V0RW1wbG95ZWUoKSk7CiAgICAgICAgICAgICAgICB1c2VyMlBwci5wdXQocHByS2V5LCBwcHJCTyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxvbmcgbWlsbGlzID0gRHVyYXRpb24uYmV0d2Vlbih0YXNrVGltZSwgaG91clRpbWUpLnRvTWlsbGlzKCk7CiAgICAgICAgICAgIHBwckJPLmFkZFdvcmtUaW1lKG1pbGxpcyk7CiAgICAgICAgICAgIHBwckJPLmdldENvbXB1dGVQcm9jZXNzKCkuZ2V0V29ya1RpbWUoKS5hZGQoCiAgICAgICAgICAgICAgICBjdXJyZW50RXZlbnQuZ2V0Q29kZSgpICsgIjoiICsgY3VycmVudEV2ZW50LmdldFByb2Nlc3MoKSArICI6IiArIG1pbGxpcyk7CiAgICAgICAgfQogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGNvbXB1dGVJZGxlVGltZShFbXBsb3llZVBwckNvbnRleHQgY29udGV4dCwgTGFib3VyRWZmaWNpZW5jeURUTyBpZGxlRXZlbnQpIHsKICAgICAgICBMb2NhbERhdGVUaW1lIHN0YXJ0VGltZSA9IGlkbGVFdmVudC5nZXRTdGFydFRpbWUoKTsKICAgICAgICBMb2NhbERhdGVUaW1lIGVuZFRpbWUgPSBpZGxlRXZlbnQuZ2V0RW5kVGltZSgpOwogICAgICAgIFN0cmluZyBpbmR1c3RyeUNvZGUgPSBpZGxlRXZlbnQuZ2V0SW5kdXN0cnlDb2RlKCk7CiAgICAgICAgbG9uZyB3YXJlaG91c2VJZCA9IExvbmcucGFyc2VMb25nKGlkbGVFdmVudC5nZXRXYXJlaG91c2VJZCgpKTsKICAgICAgICBMb25nIGVtcGxveWVlTnVtYmVyID0gY29udGV4dC5nZXRFbXBsb3llZSgpLmdldE51bWJlcigpOwogICAgICAgIE1hcDxTdHJpbmcsIExtc0xhYm91ckVmZmljaWVuY3lQcHJCTz4gdXNlcjJQcHIgPSBjb250ZXh0LmdldFBhcmFtKCkuZ2V0VXNlcjJQcHIoKTsKCiAgICAgICAgLy8g6Leo5bCP5pe25Z2H5pGKCiAgICAgICAgZm9yIChMb2NhbERhdGVUaW1lIHRhc2tUaW1lID0gc3RhcnRUaW1lOyB0YXNrVGltZS5pc0JlZm9yZShlbmRUaW1lKTsKICAgICAgICAgICAgIHRhc2tUaW1lID0gdGFza1RpbWUucGx1c0hvdXJzKDEpLnRydW5jYXRlZFRvKEhPVVJTKSkgewoKICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBob3VyVGltZSA9IHRhc2tUaW1lLnBsdXNIb3VycygxKS50cnVuY2F0ZWRUbyhIT1VSUyk7CiAgICAgICAgICAgIGlmIChob3VyVGltZS5pc0FmdGVyKGVuZFRpbWUpKSB7CiAgICAgICAgICAgICAgICBob3VyVGltZSA9IGVuZFRpbWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFN0cmluZyBvcGVyYXRlVGltZSA9IExvY2FsRGF0ZVV0aWwuZm9ybWF0KHRhc2tUaW1lLCAieXl5eS1NTS1kZCBISDowMDowMCIpOwoKICAgICAgICAgICAgUG9zaXRpb25DYXRlZ29yeUJPIHBvc2l0aW9uID0gbnVsbDsKICAgICAgICAgICAgU3RyaW5nIHBwcktleSA9ICIiOwogICAgICAgICAgICBpZiAoaWRsZUV2ZW50LmlzSW5EaXJlY3RMYWJvdXIoKSkgewogICAgICAgICAgICAgICAgcHByS2V5ID0gd2FyZWhvdXNlSWQgKyBpbmR1c3RyeUNvZGUgKyBlbXBsb3llZU51bWJlciArIGlkbGVFdmVudC5nZXRQb3NpdGlvbkNvZGUoKSArIG9wZXJhdGVUaW1lOwogICAgICAgICAgICB9IGVsc2UgaWYgKGlkbGVFdmVudC5pc0RpcmVjdExhYm91cigpKSB7CiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IGdldFBvc2l0aW9uRnJvbVRhc2soaWRsZUV2ZW50KTsKICAgICAgICAgICAgICAgIHBwcktleSA9IHdhcmVob3VzZUlkICsgaW5kdXN0cnlDb2RlICsgZW1wbG95ZWVOdW1iZXIgKyBwb3NpdGlvbi5nZXRXb3JrVHlwZSgpICsgb3BlcmF0ZVRpbWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJvb2xlYW4gdW5rbm93biA9IFN0cmluZ1V0aWxzLmlzQmxhbmsocHByS2V5KTsKICAgICAgICAgICAgaWYgKHVua25vd24pIHsKICAgICAgICAgICAgICAgIEluZGlyZWN0UG9zaXRpb25DYXRlZ29yeUJPIGluZGlyZWN0UG9zaXRpb25DYXRlZ29yeUJPID0gUHByVXRpbHMuZ2V0UHBySW5kaXJlY3RXb3JrVHlwZUZyb21Qb3NpdGlvbigKICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmdldEVtcGxveWVlKCkuZ2V0UG9zaXRpb24oKSk7CiAgICAgICAgICAgICAgICBwcHJLZXkgPSB3YXJlaG91c2VJZCArIGluZHVzdHJ5Q29kZSArIGVtcGxveWVlTnVtYmVyICsKICAgICAgICAgICAgICAgICAgICBpbmRpcmVjdFBvc2l0aW9uQ2F0ZWdvcnlCTy5nZXRXb3JrVHlwZSgpICsgb3BlcmF0ZVRpbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgTG1zTGFib3VyRWZmaWNpZW5jeVBwckJPIHBwckJPID0gdXNlcjJQcHIuZ2V0KHBwcktleSk7CgogICAgICAgICAgICBpZiAocHByQk8gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcHByQk8gPSBpbml0UHByQk8oY29udGV4dC5nZXREYXRlKCksIHRhc2tUaW1lLCBpZGxlRXZlbnQsIHBvc2l0aW9uLCBjb250ZXh0LmdldEVtcGxveWVlKCkpOwogICAgICAgICAgICAgICAgaWYgKGlkbGVFdmVudC5pc0luRGlyZWN0TGFib3VyKCkpIHsKICAgICAgICAgICAgICAgICAgICBwcHJCTy5zZXRDYXRlZ29yeShQcHJVdGlscy5nZXRDYXRlZ29yeUZyb21JbmRpcmVjdChpZGxlRXZlbnQuZ2V0UG9zaXRpb25Db2RlKCkpLg==</text>
      </register>
      <register name=":" type="4">
        <text>wq</text>
      </register>
    </registers>
  </component>
  <component name="VimSearchSettings">
    <search>
      <last-search encoding="base64">XDxuYW1lXD4=</last-search>
      <last-offset />
      <last-pattern encoding="base64">XDxuYW1lXD4=</last-pattern>
      <last-replace>startTime</last-replace>
      <last-substitute>localDateTime</last-substitute>
      <last-dir>-1</last-dir>
      <show-last>false</show-last>
    </search>
  </component>
  <component name="VimSettings">
    <state version="6" enabled="true" />
    <notifications>
      <idea-join enabled="true" />
      <idea-put enabled="false" />
    </notifications>
  </component>
</application>